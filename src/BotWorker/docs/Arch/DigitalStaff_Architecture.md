# 数字员工管理系统：架构与设计哲学

## 1. 核心目标
本系统旨在管理“数字员工”（Digital Staff），其核心能力**不依赖于硬编码逻辑**，而是由以下三要素驱动：
- **提示词工程 (Prompt Engineering)**：定义员工的人设、思维逻辑和任务边界。
- **认知记忆 (Cognitive Memory)**：沉淀长期知识与短期上下文，实现经验积累。
- **技能编排 (Skills Call)**：通过调用系统内注册的各种 Skill（插件功能）来执行具体动作。

## 2. 核心架构模块

### A. AI 服务中枢 (AIService)
- **职责**：作为所有数字员工的“大脑”。
- **实现**：通过 `IAIService` 接口提供 `ChatAsync` 能力，支持动态注入不同的 LLM 模型。
- **原则**：系统代码只负责传递上下文，不干预 AI 的决策过程。

### B. 提示词自动进化 (Auto-Evolution)
- **逻辑**：基于 KPI 绩效评分。
- **流程**：
  1. 记录员工执行任务的 KPI。
  2. 当 KPI 触发特定阈值（如平均分 > 95 或完成 5 次任务）时，启动进化。
  3. AI 分析历史绩效反馈，重写员工的 `SystemPrompt`。

### C. 认知记忆系统 (Cognitive Memory)
- **碎片化记录**：记录员工在执行任务过程中的关键发现。
- **记忆固化 (Consolidation)**：当碎片记忆达到上限时，AI 自动提炼、去重并生成结构化记忆。
- **存储**：支持向量化检索（Embedding），确保员工能快速提取相关经验。

### D. B2B 协作与技能网格 (Skill Mesh)
- **主动协作**：当员工通过 AI 判断任务超出其能力范围时，主动发起 B2B 协作。
- **技能调用**：通过 `IRobot.CallSkillAsync` 调用其他员工或插件注册的技能。

## 3. 开发准则
1. **不要硬编码业务逻辑**：如果一个功能可以通过修改提示词实现，就不要写 C# 代码。
2. **重视 KPI 反馈循环**：所有的任务结果都应反馈给 KPI 系统，作为进化的依据。
3. **插件化思维**：数字员工本身是一个插件，它调用的能力也应该是插件提供的 Skill。
