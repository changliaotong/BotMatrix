# 数字员工系统自动化测试战略

## 1. 测试哲学
我们不测试“代码怎么写”，我们测试“目标是否达成”。测试应模拟真实的人机交互和 AI 决策过程。

## 2. 当前测试能力 (Level 1: 单元逻辑层)
- **核心模型校验**：确保 `DigitalStaff`、`StaffTask` 等模型的初始状态、等级算法符合预期。
- **协议解析测试**：验证系统能否准确解析 AI 输出的控制指令（如 `[CALL_SKILL:]`, `[SCORE:]`）。
- **指令分发测试**：确保用户输入的命令（如“雇佣”、“派单”）能正确路由到对应的业务函数。

## 3. 中期规划 (Level 2: 模拟仿真层)
- **AI 响应模拟 (AI Mocking)**：编写测试用例模拟 AI 的各种极端回复，测试系统的鲁棒性。
- **技能联动测试**：在不启动真实插件的情况下，验证技能调用的参数传递和结果回传逻辑。

## 4. 终极愿景 (Level 3: 数字测试工程师)
- **AI 驱动用例生成**：AI 根据 `IRobot` 接口定义，自动编写 xUnit 测试脚本。
- **自我修复循环**：
    1. AI 开发工程师编写代码。
    2. 数字测试员运行测试。
    3. 若测试失败，AI 审计员分析错误日志并重写代码。
    4. 循环直至测试通过。

## 5. 如何运行测试
在终端执行：
```bash
cd src/BotWorker.Tests
dotnet test
```
