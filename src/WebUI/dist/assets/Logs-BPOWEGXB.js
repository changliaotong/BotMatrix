import{c as m,d as V,a as $,u as D,r as v,o as q,E as z,e as c,f as e,h as i,i as l,T as R,t as o,n as k,j as L,w as O,v as W,G as C,F as N,k as j,l as I,m as G,g as S,B as H,q as n,_ as Q}from"./index-BWDwowKp.js";import{R as F,T as J}from"./trash-2-CeG-whE1.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=m("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=m("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=m("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=m("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=m("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ee={class:"p-4 sm:p-8 space-y-4 sm:space-y-8"},te={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ae={class:"flex items-center gap-4"},se={class:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl bg-[var(--matrix-color)]/10 flex items-center justify-center"},oe={class:"text-xl sm:text-2xl font-black text-[var(--text-main)] tracking-tight uppercase italic"},re={class:"text-[var(--text-muted)] text-[10px] sm:text-xs font-bold tracking-widest uppercase"},le={class:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar"},ne={class:"hidden sm:inline"},ce={class:"sm:hidden"},ie={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},de={class:"relative group"},ue=["placeholder"],pe={class:"relative"},xe={value:"all"},ve={value:"system"},me=["value"],fe={class:"relative"},he={value:"all"},ge={class:"flex items-center justify-end px-4"},be={class:"text-[10px] font-black text-[var(--text-muted)] uppercase tracking-widest"},ye={class:"bg-[var(--bg-card)] border border-[var(--border-color)] rounded-[2rem] overflow-hidden shadow-sm flex flex-col h-[calc(100vh-380px)] sm:h-[calc(100vh-320px)] transition-colors duration-300"},_e={class:"flex-1 overflow-y-auto custom-scrollbar p-4 sm:p-6"},ke={key:0,class:"space-y-2"},we={class:"flex-1 min-w-0 space-y-1"},Re={class:"flex items-center gap-3"},Le={class:"text-[10px] font-black text-[var(--text-muted)] mono tracking-tighter opacity-50 group-hover:opacity-100 transition-opacity"},Oe={key:0,class:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-[var(--matrix-color)]/5 text-[8px] font-bold text-[var(--matrix-color)] uppercase tracking-widest border border-[var(--matrix-color)]/10"},Ce={key:1,class:"h-full flex flex-col items-center justify-center space-y-4 opacity-50"},Ne={class:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-main)]"},je={key:2,class:"h-full flex flex-col items-center justify-center space-y-4 opacity-30"},Ie={class:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-main)]"},Se=V({__name:"Logs",setup(Fe){const g=$(),B=D(),r=s=>B.t(s),p=v([]),x=v(!1),d=v(!0);let w=null;const b=v("all"),y=v("all"),_=v(""),f=async()=>{if(!x.value){x.value=!0;try{const s={};b.value!=="all"&&(s.bot_id=b.value),y.value!=="all"&&(s.level=y.value),_.value&&(s.search=_.value);const a=await g.fetchSystemLogs(s);a.success&&a.data&&(p.value=a.data.logs||[])}catch(s){console.error("Failed to fetch logs:",s)}finally{x.value=!1}}},M=async()=>{if(confirm(r("confirm_clear_logs")))try{(await g.clearSystemLogs()).success&&(p.value=[])}catch(s){console.error("Failed to clear logs:",s)}},T=()=>{const s=p.value.map(h=>`[${h.time}] [${h.level}] ${h.source?`[@${h.source}] `:""}${h.message}`).join(`
`),a=new Blob([s],{type:"text/plain"}),t=URL.createObjectURL(a),u=document.createElement("a");u.href=t,u.download=`botmatrix-logs-${new Date().toISOString().split("T")[0]}.log`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(t)};q(async()=>{await g.fetchBots(),f(),w=window.setInterval(()=>{d.value&&!x.value&&f()},5e3)}),z(()=>{w&&clearInterval(w)});const E=s=>{switch(s){case"ERROR":return"text-red-500 bg-red-500/10";case"WARN":return"text-yellow-500 bg-yellow-500/10";case"INFO":return"text-[var(--matrix-color)] bg-[var(--matrix-color)]/10";default:return"text-[var(--text-muted)] bg-[var(--text-muted)]/10"}},U=s=>{switch(s){case"ERROR":return A;case"WARN":return Z;case"INFO":return X;default:return R}};return(s,a)=>(n(),c("div",ee,[e("div",te,[e("div",ae,[e("div",se,[i(l(R),{class:"w-5 h-5 sm:w-6 sm:h-6 text-[var(--matrix-color)]"})]),e("div",null,[e("h1",oe,o(r("system_logs")),1),e("p",re,o(r("centralized_log_mgmt")),1)])]),e("div",le,[e("button",{onClick:a[0]||(a[0]=t=>d.value=!d.value),class:k(["flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border shrink-0",d.value?"bg-[var(--matrix-color)]/10 border-[var(--matrix-color)]/20 text-[var(--matrix-color)]":"bg-black/5 dark:bg-white/5 border-transparent text-[var(--text-muted)]"])},[i(l(F),{class:k(["w-3 h-3",{"animate-spin":d.value&&x.value}])},null,8,["class"]),e("span",ne,o(d.value?r("auto_refresh_on"):r("auto_refresh_off")),1),e("span",ce,o(d.value?"ON":"OFF"),1)],2),e("button",{onClick:T,class:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl bg-black/5 dark:bg-white/5 text-[var(--text-muted)] text-[10px] font-black uppercase tracking-widest hover:bg-black/10 dark:hover:bg-white/10 transition-all shrink-0"},[i(l(K),{class:"w-3 h-3"}),L(" "+o(r("export")),1)]),e("button",{onClick:M,class:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl bg-red-500/10 text-red-500 text-[10px] font-black uppercase tracking-widest hover:bg-red-500/20 transition-all shrink-0"},[i(l(J),{class:"w-3 h-3"}),L(" "+o(r("clear")),1)])])]),e("div",ie,[e("div",de,[i(l(Y),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] group-focus-within:text-[var(--matrix-color)] transition-colors"}),O(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),onInput:f,type:"text",placeholder:r("search_logs"),class:"w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl py-3 pl-12 pr-4 text-xs font-bold tracking-wider text-[var(--text-main)] focus:outline-none focus:border-[var(--matrix-color)]/50 transition-all"},null,40,ue),[[W,_.value]])]),e("div",pe,[i(l(P),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)]"}),O(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>b.value=t),onChange:f,class:"w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl py-3 pl-12 pr-4 text-xs font-bold tracking-wider text-[var(--text-main)] focus:outline-none focus:border-[var(--matrix-color)]/50 appearance-none transition-all cursor-pointer"},[e("option",xe,o(r("all_sources")),1),e("option",ve,o(r("system")),1),(n(!0),c(N,null,j(l(g).bots,t=>(n(),c("option",{key:t.id,value:t.id}," BOT: "+o(t.nickname||t.id),9,me))),128))],544),[[C,b.value]])]),e("div",fe,[i(l(A),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)]"}),O(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>y.value=t),onChange:f,class:"w-full bg-[var(--bg-card)] border border-[var(--border-color)] rounded-2xl py-3 pl-12 pr-4 text-xs font-bold tracking-wider text-[var(--text-main)] focus:outline-none focus:border-[var(--matrix-color)]/50 appearance-none transition-all cursor-pointer"},[e("option",he,o(r("all_levels")),1),a[4]||(a[4]=e("option",{value:"INFO"},"INFO",-1)),a[5]||(a[5]=e("option",{value:"WARN"},"WARNING",-1)),a[6]||(a[6]=e("option",{value:"ERROR"},"ERROR",-1))],544),[[C,y.value]])]),e("div",ge,[e("span",be,o(p.value.length)+" "+o(r("entries_found")),1)])]),e("div",ye,[e("div",_e,[p.value.length>0?(n(),c("div",ke,[(n(!0),c(N,null,j(p.value,(t,u)=>(n(),c("div",{key:u,class:"group flex items-start gap-4 p-3 rounded-2xl hover:bg-[var(--matrix-color)]/5 transition-all"},[e("div",{class:k(["mt-1 p-1.5 rounded-lg shrink-0",E(t.level)])},[(n(),I(G(U(t.level)),{class:"w-3 h-3"}))],2),e("div",we,[e("div",Re,[e("span",Le,o(t.time),1),t.source?(n(),c("span",Oe,[t.source!=="system"?(n(),I(l(H),{key:0,class:"w-2 h-2"})):S("",!0),L(" "+o(t.source),1)])):S("",!0)]),e("p",{class:k(["text-[11px] leading-relaxed break-all font-medium transition-colors",t.level==="ERROR"?"text-red-400":"text-[var(--text-main)]/80"])},o(t.message),3)])]))),128))])):x.value?(n(),c("div",Ce,[i(l(F),{class:"w-8 h-8 text-[var(--matrix-color)] animate-spin"}),e("p",Ne,o(r("fetching_logs")),1)])):(n(),c("div",je,[i(l(R),{class:"w-12 h-12 text-[var(--text-main)]"}),e("p",Ie,o(r("no_logs")),1)]))])])]))}}),Me=Q(Se,[["__scopeId","data-v-c4c06c1a"]]);export{Me as default};
