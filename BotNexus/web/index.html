<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BotMatrix Manager v1.1.87</title>
    <link rel="icon" href="data:,">
    <!-- Load critical CSS -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.staticfile.org/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css" rel="stylesheet">
    
    <!-- System Shield -->
    <script src="js/shield.js?v=1.1.87"></script>
    
    <!-- Load critical JS libraries -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.staticfile.org/Chart.js/3.7.1/chart.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.staticfile.org/three.js/0.141.0/three.min.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/three@0.141.0/examples/js/controls/OrbitControls.js" crossorigin="anonymous"></script>
    
    <!-- App Entry Point -->
    <script type="module" src="js/init.js"></script>
    
    <style>
        :root {
            --bg-body: #f8f9fa;
            --bg-sidebar: #ffffff;
            --bg-card: #ffffff;
            --text-main: #212529;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --primary-color: #0d6efd;
            
            --bg-console: #f8f9fa;
            --text-console: #212529;
            --color-log-time: #0d6efd;
            --color-log-info: #198754;
            --color-log-error: #dc3545;
            --color-log-debug: #6c757d;
            
            --bg-list-item: #f8f9fa;
        }

        [data-theme="dark"] {
            --bg-body: #121212;
            --bg-sidebar: #1e1e1e;
            --bg-card: #1e1e1e;
            --text-main: #e0e0e0;
            --text-muted: #adb5bd;
            --border-color: #333333;
            --primary-color: #3d8bfd;

            --bg-console: #1e1e1e;
            --text-console: #d4d4d4;
            --color-log-time: #569cd6;
            --color-log-info: #4ec9b0;
            --color-log-error: #f44747;
            --color-log-debug: #dcdcaa;
            
            --bg-list-item: #2c2c2c;
        }

        /* Dark Mode Overrides */
        [data-theme="dark"] .dropdown-menu {
            background-color: var(--bg-card);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .dropdown-item {
            color: var(--text-main);
        }
        [data-theme="dark"] .dropdown-item:hover {
            background-color: var(--bg-list-item);
            color: var(--text-main);
        }
        [data-theme="dark"] .list-group-item {
            background-color: var(--bg-card);
            color: var(--text-main);
            border-color: var(--border-color);
        }
        /* Fix TAB title background in dark mode */
        [data-theme="dark"] .nav-tabs .nav-link.active {
            background-color: var(--bg-card) !important;
            color: var(--text-main) !important;
            border-color: var(--border-color) var(--border-color) var(--bg-body);
        }
        [data-theme="dark"] .card-header,
        [data-theme="dark"] .card-footer {
            background-color: rgba(255, 255, 255, 0.05) !important;
            border-bottom-color: var(--border-color);
            border-top-color: var(--border-color);
            color: var(--text-main);
        }
        [data-theme="dark"] .bg-white,
        [data-theme="dark"] .bg-light,
        [data-theme="dark"] .table-light {
            background-color: var(--bg-list-item) !important;
            color: var(--text-main) !important;
        }
        [data-theme="dark"] .list-group-item.active {
            background-color: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
            color: #ffffff !important;
        }
        [data-theme="dark"] .nav-tabs .nav-link.active {
            background-color: var(--bg-card) !important;
            color: var(--primary-color) !important;
            border-color: var(--border-color) var(--border-color) var(--bg-card) !important;
        }
        [data-theme="dark"] .modal-content {
            background-color: var(--bg-card);
            border-color: var(--border-color);
            color: var(--text-main);
        }
        [data-theme="dark"] .modal-header {
            border-bottom-color: var(--border-color);
        }
        [data-theme="dark"] .modal-header .btn-close {
            filter: invert(1) grayscale(100%) brightness(200%);
        }
        [data-theme="dark"] .modal-footer {
            background-color: var(--bg-sidebar);
            border-top-color: var(--border-color);
        }
        [data-theme="dark"] .table {
            color: var(--text-main) !important;
            border-color: var(--border-color) !important;
        }
        [data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > * {
            background-color: rgba(255, 255, 255, 0.02) !important;
            color: var(--text-main) !important;
            box-shadow: inset 0 0 0 9999px rgba(255, 255, 255, 0.02) !important;
        }
        [data-theme="dark"] .table-hover > tbody > tr:hover > * {
            background-color: rgba(255, 255, 255, 0.04) !important;
            color: var(--text-main) !important;
            box-shadow: inset 0 0 0 9999px rgba(255, 255, 255, 0.04) !important;
        }
        [data-theme="dark"] .card-header {
            border-bottom: 1px solid var(--border-color) !important;
        }
        [data-theme="dark"] .card-footer {
            border-top: 1px solid var(--border-color) !important;
        }
        [data-theme="dark"] .text-primary { color: #4dabf7 !important; }
        [data-theme="dark"] .text-success { color: #51cf66 !important; }
        [data-theme="dark"] .text-warning { color: #fcc419 !important; }
        [data-theme="dark"] .text-danger { color: #ff6b6b !important; }
        [data-theme="dark"] .text-secondary { color: #adb5bd !important; }
        [data-theme="dark"] .text-muted { color: #868e96 !important; }
        [data-theme="dark"] .border-light { border-color: var(--border-color) !important; }
        [data-theme="dark"] .form-control,
        [data-theme="dark"] .form-select {
            background-color: var(--bg-sidebar) !important;
            border-color: var(--border-color) !important;
            color: var(--text-main) !important;
        }
        [data-theme="dark"] .form-control::placeholder {
            color: #6c757d !important;
        }
        [data-theme="dark"] .card-header.bg-primary,
        [data-theme="dark"] .card-header.bg-warning,
        [data-theme="dark"] .card-header.bg-success,
        [data-theme="dark"] .card-header.bg-danger,
        [data-theme="dark"] .card-header.bg-info,
        [data-theme="dark"] .bg-primary:not(.badge):not(.btn),
        [data-theme="dark"] .bg-warning:not(.badge):not(.btn),
        [data-theme="dark"] .bg-success:not(.badge):not(.btn),
        [data-theme="dark"] .bg-danger:not(.badge):not(.btn),
        [data-theme="dark"] .bg-info:not(.badge):not(.btn) {
            background-color: rgba(255, 255, 255, 0.1) !important;
            color: var(--text-main) !important;
            border-color: var(--border-color) !important;
        }
        [data-theme="dark"] .alert-info {
            background-color: rgba(13, 202, 240, 0.1);
            border-color: rgba(13, 202, 240, 0.2);
            color: #6edff6;
        }
        [data-theme="dark"] .alert-success {
            background-color: rgba(25, 135, 84, 0.1);
            border-color: rgba(25, 135, 84, 0.2);
            color: #75b798;
        }
        [data-theme="dark"] .alert-warning {
            background-color: rgba(255, 193, 7, 0.1);
            border-color: rgba(255, 193, 7, 0.2);
            color: #ffda6a;
        }
        [data-theme="dark"] .alert-danger {
            background-color: rgba(220, 53, 69, 0.1);
            border-color: rgba(220, 53, 69, 0.2);
            color: #ea868f;
        }

        /* Dark Mode Modal & Table */
        [data-theme="dark"] .modal-content {
            background-color: var(--bg-card);
            color: var(--text-main);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .modal-header,
        [data-theme="dark"] .modal-footer {
            border-color: var(--border-color);
        }
        [data-theme="dark"] .btn-close {
            filter: invert(1) grayscale(100%) brightness(200%);
        }
        [data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) {
            --bs-table-accent-bg: rgba(255, 255, 255, 0.05);
            color: var(--text-main);
        }
        [data-theme="dark"] .table-hover > tbody > tr:hover {
            --bs-table-hover-bg: rgba(255, 255, 255, 0.1);
            color: var(--text-main);
        }
        [data-theme="dark"] .table {
            color: var(--text-main);
        }
        [data-theme="dark"] .table thead th {
            background-color: var(--bg-sidebar) !important;
            color: var(--text-main) !important;
            border-color: var(--border-color);
        }
        [data-theme="dark"] .table > :not(caption) > * > * {
            border-color: var(--border-color);
        }
        [data-theme="dark"] .list-group-item {
            background-color: var(--bg-card) !important;
            color: var(--text-main) !important;
            border-color: var(--border-color) !important;
        }
        [data-theme="dark"] .dropdown-menu {
            background-color: var(--bg-card);
            border-color: var(--border-color);
        }
        [data-theme="dark"] .dropdown-item {
            color: var(--text-main);
        }
        [data-theme="dark"] .dropdown-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-main);
        }
        [data-theme="dark"] .dropdown-divider {
            border-top-color: var(--border-color);
        }
        [data-theme="dark"] .pagination .page-link {
            background-color: var(--bg-card);
            border-color: var(--border-color);
            color: var(--text-main);
        }
        [data-theme="dark"] .pagination .page-item.active .page-link {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        [data-theme="dark"] .pagination .page-item.disabled .page-link {
            background-color: var(--bg-sidebar);
            border-color: var(--border-color);
            color: #6c757d;
        }
        [data-theme="dark"] .nav-tabs {
            border-bottom-color: var(--border-color);
        }
        [data-theme="dark"] .nav-tabs .nav-link:hover {
            border-color: var(--border-color) var(--border-color) transparent;
        }
        [data-theme="dark"] .card {
            border-color: var(--border-color);
        }
        [data-theme="dark"] hr {
            background-color: var(--border-color);
            opacity: 0.5;
        }

        .time-display { display: flex; flex-direction: column; align-items: flex-start; gap: 6px; }
        .time-item { display: flex; flex-direction: row; align-items: baseline; gap: 12px; }
        .time-label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 0; min-width: 60px; }
        .time-value { font-size: 1rem; font-weight: 700; line-height: 1.1; font-family: 'Consolas', 'Monaco', monospace; }
        .uptime-value { color: #198754; }
        [data-theme="dark"] .uptime-value { color: #20c997; }
        .current-time-value { color: #0d6efd; }
        [data-theme="dark"] .current-time-value { color: #3d8bfd; }

        * { box-sizing: border-box; }
        body { background-color: var(--bg-body); color: var(--text-main); font-family: system-ui, -apple-system, sans-serif; transition: background-color 0.3s, color 0.3s; margin: 0; padding: 0; overflow-x: hidden; }
        .sidebar { display: flex; flex-direction: column; height: 100vh; position: fixed; top: 0; left: 0; width: 250px; background-color: var(--bg-sidebar); border-right: 1px solid var(--border-color); padding-top: 20px; z-index: 1000; transition: background-color 0.3s, border-color 0.3s; }
        .card { background-color: var(--bg-card); border: 1px solid var(--border-color); margin-bottom: 10px; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); border-radius: 0.75rem; transition: background-color 0.3s, border-color 0.3s; }
        .form-control, .form-select { background-color: var(--bg-card); color: var(--text-main); border-color: var(--border-color); }
        .form-control:focus, .form-select:focus { background-color: var(--bg-card); color: var(--text-main); border-color: var(--primary-color); }
        .dropdown-menu { background-color: var(--bg-card); border-color: var(--border-color); }
        .dropdown-item { color: var(--text-main); }
        .dropdown-item:hover { background-color: rgba(255, 255, 255, 0.1); color: var(--text-main); }
        .list-group-item { background-color: var(--bg-card); color: var(--text-main); border-color: var(--border-color); }

        /* Visualization Styles */
        #visualization-container {
            width: 100%;
            height: calc(100vh - 160px);
            background: radial-gradient(circle at center, #1a1a2e 0%, #0f0f1a 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            border: 1px solid #30363d;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.5);
        }
        #visualization-container:fullscreen {
            width: 100vw;
            height: 100vh;
            border-radius: 0;
            border: none;
        }
        #viz-nodes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }
        .viz-node {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff41;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #00ff41;
            font-size: 0.7rem;
            z-index: 2;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            backdrop-filter: blur(4px);
            pointer-events: auto;
            text-align: center;
        }
        .viz-node i {
            font-size: 1.4rem;
            margin-bottom: 2px;
            color: #00ff41;
        }
        .viz-node span {
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0 5px;
            color: #00ff41;
            font-family: 'Courier New', Courier, monospace;
            text-shadow: 0 0 5px #00ff41;
        }
        .viz-node img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #00ff41;
            margin-bottom: 2px;
        }
        .viz-node.nexus {
            width: 100px;
            height: 100px;
            background: rgba(0, 0, 0, 0.8);
            border-color: #00ff41;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);
            font-weight: bold;
        }
        .viz-node.worker {
            background: rgba(0, 0, 0, 0.7);
            border-color: #00ff41;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
        }
        .viz-node.user {
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.6);
            border-color: #00ff41;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.2);
        }
        .viz-stats {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 5px 10px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            z-index: 10;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
        }
        .viz-msg-hint {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            pointer-events: none;
            z-index: 5;
            white-space: nowrap;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Courier New', Courier, monospace;
            animation: fadeUp 2s forwards;
        }
        @keyframes fadeUp {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 1; transform: translateY(-20px); }
            80% { opacity: 1; transform: translateY(-40px); }
            100% { opacity: 0; transform: translateY(-60px); }
        }
        #viz-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        .viz-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            pointer-events: none;
            white-space: nowrap;
            z-index: 3;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -120%);
        }
        .viz-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            box-shadow: 0 0 10px #fff;
        }
        .table { color: var(--text-main); border-color: var(--border-color); }
        .nav-link { color: var(--text-muted); }
        
        .sidebar a { color: var(--text-muted); padding: 12px 24px; display: block; text-decoration: none; border-left: 3px solid transparent; }
        .sidebar a:hover, .sidebar a.active { color: var(--primary-color); background-color: rgba(13, 110, 253, 0.1); border-left-color: var(--primary-color); font-weight: 500; }
        .nav-section-label {
            padding: 1rem 1.5rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 0.05rem;
            opacity: 0.7;
        }
        .main-content { margin-left: 250px !important; width: calc(100% - 250px) !important; padding: 25px; padding-top: 10px; min-height: 100vh; position: relative; }
        /* Tab Content visibility */
        .main-content > .tab-content:not(.active-tab) { display: none !important; }
        .main-content > .tab-content.active-tab { display: flex !important; flex-direction: column; }
        #tab-bots.active-tab, #tab-dashboard.active-tab, #tab-monitor.active-tab { display: flex !important; }
        #tab-monitor.active-tab { flex-direction: column; }
        
        /* Dashboard & Bot List Layout */
        #tab-dashboard { flex-direction: column; }
        #tab-bots { flex-direction: column; }
        .metric-label { font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .log-box { background-color: var(--bg-console); color: var(--text-console); font-family: monospace; padding: 15px; overflow-y: auto; border-radius: 0.5rem; font-size: 0.85rem; border: 1px solid var(--border-color); }
        .log-entry { margin-bottom: 4px; border-bottom: 1px solid var(--border-color); padding-bottom: 2px; }
        .log-time { color: var(--color-log-time); margin-right: 10px; }
        .log-level-INFO { color: var(--color-log-info); }
        .log-level-ERROR { color: var(--color-log-error); }
        .log-level-DEBUG { color: var(--color-log-debug); }

        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }
        .fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-5px); }
        }

        /* Login Page Styles */
        .login-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: none; /* ä¿®æ”¹ï¼šåˆå§‹éšè—ï¼Œé˜²æ­¢é—ªç° */
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: all 0.5s ease;
            opacity: 1;
            visibility: visible;
        }
        [data-theme="dark"] .login-page {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }
        .login-card {
            background: white;
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 1rem 3rem rgba(0,0,0,0.175);
            width: 100%;
            max-width: 450px;
            animation: slideUp 0.5s ease-out;
            position: relative;
            z-index: 10000;
        }
        [data-theme="dark"] .login-card {
            background: var(--bg-card);
            color: var(--text-main);
            border: 1px solid var(--border-color);
        }
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .login-logo {
            width: 80px;
            height: 80px;
            background: var(--primary-color);
            color: white;
            border-radius: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin: 0 auto 1rem;
            box-shadow: 0 0.5rem 1rem rgba(13, 110, 253, 0.3);
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .login-page.hidden {
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none !important;
            display: none !important;
        }

        /* Mobile Responsive */
        .mobile-nav { display: none; }
        .overlay { display: none; }



        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                box-shadow: 0 0 15px rgba(0,0,0,0.2);
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                padding-top: 80px; /* Space for navbar */
                padding-left: 15px;
                padding-right: 15px;
            }
            .mobile-nav {
                display: flex;
                position: fixed;
                top: 0; left: 0; right: 0;
                height: 60px;
                background: #fff;
                border-bottom: 1px solid var(--border-color);
                z-index: 900;
                align-items: center;
                padding: 0 15px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            }
            .overlay {
                display: none;
                position: fixed;
                top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 999;
            }
            .overlay.show {
            display: block;
        }

        /* Group Management Mobile */
        .group-manage-container {
            height: auto !important;
        }
        .group-manage-col {
            height: 70vh !important;
            margin-bottom: 20px;
        }
    }
    
    /* Stats Card Slides */
    #combined-stats-container {
        min-height: 48px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    .stats-slide {
        transition: all 0.5s ease-in-out;
        height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: absolute;
        top: 0;
        left: 0;
    }
    .stats-slide:not(.active) {
        opacity: 0;
        pointer-events: none;
        transform: translateY(10px);
    }
    .stats-slide.active {
        opacity: 1;
        transform: translateY(0);
        position: relative;
    }

    /* Custom Stats Grid */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 1rem;
        margin-bottom: 0.75rem;
    }
    @media (max-width: 1400px) {
        .stats-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 992px) {
        .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 576px) {
        .stats-grid { grid-template-columns: 1fr; }
    }
    .icon-circle {
        width: 42px;
        height: 42px;
        border-radius: 50% !important; /* Force circle */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        flex-shrink: 0;
    }
    .stat-card {
        display: flex;
        align-items: center;
        padding: 0.75rem;
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 0 1px 2px rgba(0,0,0,0.02);
        height: 100%;
        transition: transform 0.2s;
    }
    .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    }
    .stat-info {
        overflow: hidden;
        margin-left: 0.75rem;
    }
    .stat-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-bottom: 2px;
    }
    .stat-value {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--text-main);
        line-height: 1;
    }
    /* Message Flow Animation */
    @keyframes flowRight {
        0% { transform: translateX(-100%); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateX(100%); opacity: 0; }
    }
    .message-flow-line {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        animation: flowRight 2s infinite linear;
        pointer-events: none;
    }
    .stat-card {
        position: relative;
        overflow: hidden;
    }
    .stat-card.active-flow .message-flow-line {
        display: block;
    }
    .stat-card .message-flow-line {
        display: none;
    }
    .time-display {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        gap: 6px;
        height: 100%;
        padding: 5px 0;
    }
    .time-item {
        display: flex;
        flex-direction: row;
        align-items: baseline;
        gap: 12px;
    }
    .uptime-item {
        align-items: baseline;
        gap: 12px;
    }
    .uptime-item .time-label {
        margin-bottom: 0;
    }
    .current-time-item {
        flex-direction: row !important;
        align-items: baseline;
        gap: 12px;
    }
    .time-item:last-child {
        margin-bottom: 0;
    }
    .time-label {
        font-size: 0.65rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0;
        min-width: 60px;
    }
    .time-value {
        font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary-color);
        text-shadow: 0 0 10px rgba(0, 255, 65, 0.2);
        line-height: 1.2;
    }
    .current-time-value {
        color: var(--text-main);
    }
    .time-sep {
        opacity: 0.5;
        margin: 0 2px;
        animation: blink 1s infinite;
    }
    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.2; }
    }
    
        /* Cloud Matrix Layout Adjustment */
        #tab-bots {
            height: calc(100vh - 35px);
            display: flex;
            flex-direction: column;
        }
        #tab-bots > .row {
            flex: 1;
            height: 100%;
        }
        #tab-bots .col-xl-7, #tab-bots .col-xl-5 {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        #tab-bots .card {
            flex: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            border-radius: 0.75rem;
            overflow: hidden;
        }
        #tab-bots .card-body {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 1rem;
        }
        .bot-list-container, .worker-list-container {
             flex: 0 1 auto;
             max-height: 70vh;
             overflow-y: auto;
             background: rgba(0, 0, 0, 0.05);
             border: 1px solid var(--border-color);
             border-radius: 0.5rem;
             padding: 1rem !important;
             margin-bottom: 0 !important;
             margin-left: 0 !important;
             margin-right: 0 !important;
             min-height: 100px;
         }
         [data-theme="dark"] .bot-list-container, [data-theme="dark"] .worker-list-container {
             background: rgba(0, 0, 0, 0.2);
         }
        /* Custom Scrollbar for list containers */
        .bot-list-container::-webkit-scrollbar, .worker-list-container::-webkit-scrollbar {
            width: 6px;
        }
        .bot-list-container::-webkit-scrollbar-track, .worker-list-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .bot-list-container::-webkit-scrollbar-thumb, .worker-list-container::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }
        [data-theme="dark"] .bot-list-container::-webkit-scrollbar-thumb, [data-theme="dark"] .worker-list-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
        }
</style>
</head>
<body>


    <!-- Login Modal -->
    <div id="loginPage" class="login-page">
        <div class="login-card">
            <div class="login-header">
                <div class="login-logo">
                    <i class="bi bi-robot"></i>
                </div>
                 <h3>BotMatrix</h3>
                <p class="text-muted" data-i18n="login_subtitle">ç»Ÿä¸€ç®¡ç†å¹³å°</p>
            </div>
            <form id="loginForm">
                <div class="mb-3">
                    <label class="form-label" data-i18n="username">ç”¨æˆ·å</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-person"></i></span>
                        <input type="text" class="form-control" id="loginUser" required data-i18n-placeholder="login_placeholder_user" placeholder="admin">
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label" data-i18n="password">å¯†ç </label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-lock"></i></span>
                        <input type="password" class="form-control" id="loginPass" required data-i18n-placeholder="login_placeholder_pass" placeholder="******">
                    </div>
                </div>
                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <span id="loginBtnText" data-i18n="login_btn">ç™»å½•</span>
                        <span id="loginBtnLoading" class="spinner-border spinner-border-sm d-none"></span>
                    </button>
                </div>
            </form>
            <div id="loginError" class="alert alert-danger mt-3 d-none"></div>
            <div class="login-footer mt-4 text-center">
                <small class="text-muted">&copy; 2025 BotMatrix Team. All Rights Reserved.</small>
            </div>
        </div>
    </div>

    <!-- ç§»é™¤æ—§çš„ loginModal -->

    <!-- Mobile Nav -->
    <div class="mobile-nav">
        <button class="btn btn-outline-secondary me-3" onclick="toggleSidebar()">
            <i class="bi bi-list fs-4"></i>
        </button>
        <h5 class="m-0">BotMatrix <small class="text-muted fs-6">v1.1.87</small></h5>
    </div>
    
    <!-- Overlay -->
    <div class="overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- Stats Modal -->
    <div class="modal fade" id="statsModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="statsModalTitle" data-i18n="modal_stats_title">ç»Ÿè®¡è¯¦æƒ…</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <table class="table table-striped table-hover mb-0">
                        <thead class="sticky-top" style="top: 0; background-color: var(--bg-card); border-bottom: 2px solid var(--border-color); z-index: 10;">
                            <tr>
                                <th scope="col" width="60" class="border-0">#</th>
                                <th scope="col" id="statsModalNameHeader" data-i18n="modal_col_name" class="border-0">åç§°</th>
                                <th scope="col" width="100" class="text-end border-0" data-i18n="modal_col_count">æ•°é‡</th>
                            </tr>
                        </thead>
                        <tbody id="statsModalBody">
                            <!-- Data -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Create User Modal -->
    <div class="modal fade" id="createUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" data-i18n="modal_create_user_title">åˆ›å»ºæ–°ç”¨æˆ·</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createUserForm">
                        <div class="mb-3">
                            <label class="form-label" data-i18n="username">ç”¨æˆ·å</label>
                            <input type="text" class="form-control" id="new-username" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-i18n="password">å¯†ç </label>
                            <input type="password" class="form-control" id="new-password" required>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="new-is-admin">
                            <label class="form-check-label" for="new-is-admin" data-i18n="is_admin_label">ç®¡ç†å‘˜æƒé™</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel_btn">å–æ¶ˆ</button>
                    <button type="button" class="btn btn-primary" onclick="createUser()" data-i18n="confirm_create_btn">ç¡®è®¤åˆ›å»º</button>
                </div>
            </div>
        </div>
    </div>

    <!-- System Detail Modal -->
    <div class="modal fade" id="systemDetailModal" tabindex="-1" aria-labelledby="systemDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="systemDetailModalLabel">ç³»ç»Ÿè¯¦æƒ…</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="detailChartContainer" style="height: 400px; position: relative;">
                        <canvas id="detailChart"></canvas>
                    </div>
                    <div id="hardware-info-grid" class="row mt-4">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="px-3 mb-4">
            <h4>ğŸš€ BotMatrix</h4>
            <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted" data-i18n="sidebar_subtitle">Enterprise Bot Manager</small>
                <span class="badge bg-secondary" style="font-size: 0.7em;">v1.1.84</span>
            </div>
        </div>
        
        <!-- Bot Selector Removed -->
        
        <nav class="nav flex-column">
            <div class="nav-section-label" data-i18n="menu_group_overview">æ€»è§ˆ</div>
            <a href="#dashboard" id="nav-dashboard" class="nav-link active" onclick="showTab('dashboard')"><i class="bi bi-speedometer2"></i> <span data-i18n="sidebar_dashboard">è¿è¡ŒçŠ¶æ€</span></a>
            
            <div class="nav-section-label" data-i18n="menu_group_management">ä¸šåŠ¡ç®¡ç†</div>
            <a href="#bots" id="nav-bots" class="nav-link" onclick="showTab('bots')"><i class="bi bi-robot"></i> <span data-i18n="sidebar_bots">äº‘ç«¯çŸ©é˜µ</span></a>
            <a href="#groups" id="nav-groups" class="nav-link" onclick="showTab('groups')"><i class="bi bi-people"></i> <span data-i18n="sidebar_groups">ç¾¤ç»„ç®¡ç†</span></a>
            <a href="#friends" id="nav-friends" class="nav-link" onclick="showTab('friends')"><i class="bi bi-person-heart"></i> <span data-i18n="sidebar_friends">å¥½å‹ç®¡ç†</span></a>
            <a href="#routing" id="nav-routing" class="nav-link" onclick="showTab('routing')"><i class="bi bi-diagram-3"></i> <span data-i18n="sidebar_routing">è·¯ç”±ç®¡ç†</span></a>
            <a href="#visualization" id="nav-visualization" class="nav-link" onclick="showTab('visualization')"><i class="bi bi-broadcast"></i> <span data-i18n="sidebar_visualization">è½¬å‘å¯è§†åŒ–</span></a>
            
            <div class="nav-section-label" data-i18n="menu_group_infrastructure">åŸºç¡€è®¾æ–½</div>
            <a href="#docker" id="nav-docker" class="nav-link" onclick="showTab('docker')"><i class="bi bi-box"></i> <span data-i18n="sidebar_docker">Dockerç®¡ç†</span></a>
            <a href="javascript:void(0)" id="nav-overmind" class="nav-link" onclick="openOvermind()"><i class="bi bi-grid-3x3-gap"></i> <span data-i18n="sidebar_overmind">Overmind</span></a>
            
            <div class="nav-section-label" data-i18n="menu_group_system">ç³»ç»Ÿç»´æŠ¤</div>
            <a href="#monitor" id="nav-monitor" class="nav-link" onclick="showTab('monitor')"><i class="bi bi-display"></i> <span data-i18n="sidebar_monitor">ç³»ç»Ÿç›‘æ§</span></a>
            <a href="#logs" id="nav-logs" class="nav-link" onclick="showTab('logs')"><i class="bi bi-journal-text"></i> <span data-i18n="sidebar_logs">æ—¥å¿—ä¸­å¿ƒ</span></a>
            <a href="#debug" id="nav-debug" class="nav-link" onclick="showTab('debug')"><i class="bi bi-bug"></i> <span data-i18n="sidebar_debug">è°ƒè¯•æµ‹è¯•</span></a>
            <a href="#users" id="nav-users" class="nav-link admin-only" onclick="showTab('users')"><i class="bi bi-people-fill"></i> <span data-i18n="sidebar_users">ç”¨æˆ·ç®¡ç†</span></a>
            <a href="#settings" id="nav-settings" class="nav-link admin-only" onclick="showTab('settings')"><i class="bi bi-gear"></i> <span data-i18n="sidebar_settings">ç³»ç»Ÿè®¾ç½®</span></a>
        </nav>

        <div class="mt-auto p-3 border-top d-flex justify-content-around align-items-center flex-wrap">
             <button class="btn btn-outline-secondary rounded-circle theme-toggle-btn-sidebar mb-2" onclick="toggleTheme()" title="Toggle Theme" data-i18n-title="theme_toggle" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center;">
                <i class="bi bi-moon-stars"></i>
            </button>
            
            <div class="dropup mb-2">
                <button class="btn btn-outline-secondary rounded-circle" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="Language" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center;">
                    <i class="bi bi-translate"></i>
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="javascript:void(0)" onclick="setLanguage('zh-CN')">ç®€ä½“ä¸­æ–‡</a></li>
                    <li><a class="dropdown-item" href="javascript:void(0)" onclick="setLanguage('zh-TW')">ç¹é«”ä¸­æ–‡</a></li>
                    <li><a class="dropdown-item" href="javascript:void(0)" onclick="setLanguage('en')">English</a></li>
                </ul>
            </div>

            <a href="https://github.com/changliaotong/BotMatrix" target="_blank" class="btn btn-outline-secondary rounded-circle github-btn-sidebar mb-2" title="View on GitHub" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; text-decoration: none; padding: 0;">
                <i class="bi bi-github"></i>
            </a>

            <button class="btn btn-outline-secondary rounded-circle mb-2" onclick="logout()" title="Logout" data-i18n-title="sidebar_logout" style="width: 38px; height: 38px; display: flex; align-items: center; justify-content: center;">
                <i class="bi bi-box-arrow-right"></i>
            </button>
        </div>
    </div>

    <div class="main-content">
        <!-- Dashboard Tab -->
        <div id="tab-dashboard" class="tab-content" style="display: none;">
            <!-- Stats Grid -->
            <div class="stats-grid" id="dash-system-stats">
                <!-- 1. Bots -->
                <div class="stat-card" id="card-metric-bots">
                    <div class="icon-circle bg-primary bg-opacity-10 text-primary">
                        <i class="bi bi-robot"></i>
                    </div>
                    <div class="stat-info w-100">
                        <div class="stat-label" data-i18n="stat_bots">æœºå™¨äºº (åœ¨çº¿/ç¦»çº¿/æ€»æ•°)</div>
                        <div class="stat-value">
                            <span id="metric-bots">0</span>
                            <span class="text-muted fs-6 fw-normal">/</span>
                            <span id="metric-bots-offline" class="text-muted fs-6 fw-normal">0</span>
                            <span class="text-muted fs-6 fw-normal">/</span>
                            <span id="metric-bots-total" class="text-muted fs-6 fw-normal">0</span>
                        </div>
                    </div>
                </div>

                <!-- 1.1 Workers -->
                <div class="stat-card" id="card-metric-workers">
                    <div class="icon-circle bg-info bg-opacity-10 text-info">
                        <i class="bi bi-cpu"></i>
                    </div>
                    <div class="stat-info w-100">
                        <div class="stat-label" data-i18n="stat_workers">å¤„ç†ç«¯ (Workers)</div>
                        <div class="stat-value">
                            <span id="metric-workers">0</span>
                        </div>
                    </div>
                </div>

                <!-- 2. System Resources (CPU, Memory Merged) -->
                <div class="stat-card" id="card-metric-system" title="ç³»ç»Ÿèµ„æºè¯¦æƒ…" onclick="showSystemDetail('cpu')" style="cursor: pointer;">
                    <div class="icon-circle bg-warning bg-opacity-10 text-warning">
                        <i class="bi bi-cpu-fill"></i>
                    </div>
                    <div class="stat-info w-100">
                        <div class="stat-label" id="metric-cpu-model" data-i18n="system_resource_details">ç³»ç»Ÿèµ„æº</div>
                        <div class="d-flex flex-column gap-1 mt-1">
                            <div class="d-flex justify-content-between align-items-center" onclick="event.stopPropagation(); showSystemDetail('cpu')" style="cursor: pointer;">
                                <span class="fw-bold" style="font-size: 0.85rem;"><span data-i18n="cpu_label">CPU:</span> <span id="metric-cpu">0%</span></span>
                                <div class="progress flex-grow-1 mx-2" style="height: 4px; background-color: rgba(0,0,0,0.05);">
                                    <div id="metric-cpu-bar" class="progress-bar bg-warning" role="progressbar" style="width: 0%"></div>
                                </div>
                                <span style="font-size: 0.7rem; color: var(--text-muted);"><span id="metric-cpu-cores">0</span><span data-i18n="cores_label">æ ¸</span> <span id="metric-cpu-freq">0 MHz</span></span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center" onclick="event.stopPropagation(); showSystemDetail('mem')" style="cursor: pointer;">
                                <span class="fw-bold" style="font-size: 0.85rem;"><span data-i18n="mem_label">å†…å­˜:</span> <span id="metric-mem">0 MB</span></span>
                                <div class="progress flex-grow-1 mx-2" style="height: 4px; background-color: rgba(0,0,0,0.05);">
                                    <div id="metric-mem-bar" class="progress-bar bg-info" role="progressbar" style="width: 0%"></div>
                                </div>
                                <span id="metric-mem-total" style="font-size: 0.7rem; color: var(--text-muted);">0 GB</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2.1 Operating System -->
                <div class="stat-card" id="card-metric-os" style="display: none;">
                    <div class="icon-circle bg-secondary bg-opacity-10 text-secondary">
                        <i class="bi bi-window"></i>
                    </div>
                    <div class="stat-info w-100">
                        <div class="stat-label">æ“ä½œç³»ç»Ÿ</div>
                        <div class="d-flex flex-column" style="font-size: 0.75rem;">
                            <span id="metric-os-plat" class="fw-bold">...</span>
                            <span id="metric-os-ver" style="font-size: 0.65rem; color: var(--text-muted);">...</span>
                        </div>
                    </div>
                </div>

                <!-- 4. Combined Stats (Goroutines, Active, Messages) -->
                <div class="stat-card" id="card-metric-combined" onclick="showSystemDetail('msg')" style="cursor: pointer;">
                    <div class="icon-circle bg-info bg-opacity-10 text-info" id="combined-stats-icon">
                        <i class="bi bi-activity"></i>
                    </div>
                    <div class="stat-info w-100" id="combined-stats-container">
                        <!-- Content will be rotated by JS -->
                        <div class="stats-slide active" id="slide-goroutines">
                            <div class="stat-label" data-i18n="stat_goroutines">Goroutines</div>
                            <div class="stat-value" id="metric-goroutines">0</div>
                        </div>
                        <div class="stats-slide" id="slide-active" style="display: none;">
                            <div class="stat-label" data-i18n="stat_active_groups_users">æ´»è·ƒ (ç¾¤ç»„ / ç”¨æˆ·)</div>
                            <div class="stat-value" style="font-size: 0.95rem;">
                                <span id="metric-groups-today">0</span><small class="text-muted">/</small><span id="metric-groups-total" class="text-muted fw-normal">0</span>
                                <span class="mx-1 text-muted">|</span>
                                <span id="metric-users-today">0</span><small class="text-muted">/</small><span id="metric-users-total" class="text-muted fw-normal">0</span>
                            </div>
                        </div>
                        <div class="stats-slide" id="slide-messages" style="display: none;">
                            <div class="stat-label" data-i18n="stat_messages">æ¶ˆæ¯ç»Ÿè®¡ (æ¥æ”¶/å‘é€)</div>
                            <div class="stat-value" style="font-size: 0.95rem;">
                                <span id="metric-msgs-total">0</span>
                                <span class="text-muted mx-1">/</span>
                                <span id="metric-sent-total" class="text-muted fw-normal">0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4.1 Time Info -->
                <div class="stat-card" id="card-metric-time">
                    <div class="icon-circle bg-primary bg-opacity-10 text-primary">
                        <i class="bi bi-clock"></i>
                    </div>
                    <div class="stat-info w-100">
                        <div class="time-display">
                            <div class="time-item uptime-item">
                                <span class="time-label" data-i18n="time_uptime">è¿è¡Œæ—¶é•¿</span>
                                <span id="metric-uptime" class="time-value uptime-value">00:00:00</span>
                            </div>
                            <div class="time-item current-time-item">
                                <span class="time-label" data-i18n="time_current">å½“å‰æ—¶é—´</span>
                                <span id="metric-current-time" class="time-value current-time-value">00:00:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-2">
                <div class="col-md-8">
                     <!-- Charts Row -->
                     <div class="row g-3 mb-3" id="dash-charts-row">
                        <div class="col-md-4">
                            <div class="card h-100" style="cursor: pointer;" onclick="showSystemDetail('cpu')">
                                <div class="card-header py-2 small fw-bold d-flex justify-content-between align-items-center">
                                    <span data-i18n="chart_cpu_trend">CPU è¶‹åŠ¿</span>
                                    <i class="bi bi-arrows-angle-expand text-muted"></i>
                                </div>
                                <div class="card-body p-2" style="height: 200px; position: relative;">
                                    <canvas id="cpuChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100" style="cursor: pointer;" onclick="showSystemDetail('mem')">
                                <div class="card-header py-2 small fw-bold d-flex justify-content-between align-items-center">
                                    <span data-i18n="chart_mem_trend">å†…å­˜è¶‹åŠ¿</span>
                                    <i class="bi bi-arrows-angle-expand text-muted"></i>
                                </div>
                                <div class="card-body p-2" style="height: 200px; position: relative;">
                                    <canvas id="memChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100" style="cursor: pointer;" onclick="showSystemDetail('msg')">
                                <div class="card-header py-2 small fw-bold d-flex justify-content-between align-items-center">
                                    <span data-i18n="chart_msg_throughput">æ¶ˆæ¯åå (Msg/Min)</span>
                                    <i class="bi bi-arrows-angle-expand text-muted"></i>
                                </div>
                        <div class="card-body p-2" style="height: 200px; position: relative;">
                            <canvas id="msgChart"></canvas>
                        </div>
                            </div>
                        </div>
                     </div>
 
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span data-i18n="top_active_groups">ğŸ† ä»Šæ—¥æ´»è·ƒç¾¤ç»„</span>
                                    <div>
                                        <button class="btn btn-sm btn-link text-decoration-none p-0 me-2" onclick="showAllStats('Group')" data-i18n="more">æ›´å¤š</button>
                                        <span class="badge bg-primary rounded-pill">Top 5</span>
                                    </div>
                                </div>
                                <ul class="list-group list-group-flush" id="top-groups">
                                    <li class="list-group-item text-muted text-center" data-i18n="no_data">æš‚æ— æ•°æ®</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span data-i18n="top_active_users">ğŸ—£ï¸ ä»Šæ—¥é¾™ç‹</span>
                                    <div>
                                        <button class="btn btn-sm btn-link text-decoration-none p-0 me-2" onclick="showAllStats('User')" data-i18n="more">æ›´å¤š</button>
                                        <span class="badge bg-warning text-dark rounded-pill">Top 5</span>
                                    </div>
                                </div>
                                <ul class="list-group list-group-flush" id="top-users">
                                    <li class="list-group-item text-muted text-center" data-i18n="no_data">æš‚æ— æ•°æ®</li>
                                </ul>
                            </div>
                        </div>
                    </div>
 
                    <div class="card mb-4" id="dash-process-card">
                        <div class="card-header" data-i18n="top_processes">
                            ğŸ”¥ é«˜å ç”¨è¿›ç¨‹ (Top 10)
                        </div>
                        <div class="table-responsive">
                            <table class="table table-sm table-striped mb-0">
                                <thead>
                                    <tr>
                                        <th data-i18n="col_pid">PID</th>
                                        <th data-i18n="col_process">è¿›ç¨‹å</th>
                                        <th data-i18n="col_cpu">CPU %</th>
                                        <th data-i18n="col_mem">å†…å­˜ (MB)</th>
                                    </tr>
                                </thead>
                                <tbody id="process-list">
                                    <tr><td colspan="4" class="text-center" data-i18n="loading">åŠ è½½ä¸­...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card mb-4" id="dash-actions-card">
                        <div class="card-header" data-i18n="quick_actions">
                            å¿«æ·æ“ä½œ
                        </div>
                        <div class="card-body">
                            <button class="btn btn-outline-primary me-2" onclick="callSystemAction('reload_plugins')">
                                <i class="bi bi-arrow-repeat"></i> <span data-i18n="action_reload_plugins">é‡è½½æ’ä»¶</span>
                            </button>
                            <button class="btn btn-outline-secondary me-2" onclick="callSystemAction('clean_logs')">
                                <i class="bi bi-trash"></i> <span data-i18n="action_clean_logs">æ¸…ç†æ—¥å¿—</span>
                            </button>
                        </div>
                    </div>
                </div>
 
                <div class="col-md-4">
                    <div class="card h-100" id="dash-logs-card" style="background-color: var(--bg-card); border-color: var(--border-color);">
                        <div class="card-header" data-i18n="recent_activity">
                            æœ€è¿‘æ´»åŠ¨
                        </div>
                        <div class="card-body d-flex flex-column">
                            <div id="recent-logs" class="log-box flex-grow-1"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Details View -->
        <div id="tab-view-system-details" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="mb-0"><i class="bi bi-graph-up"></i> <span data-i18n="system_resource_details">ç³»ç»Ÿèµ„æºè¯¦æƒ…</span></h4>
                <div>
                    <div class="btn-group me-2">
                        <button class="btn btn-outline-secondary btn-sm active" onclick="updateDetailTimeRange('1h')" data-i18n="time_1h">1å°æ—¶</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="updateDetailTimeRange('24h')" data-i18n="time_24h">24å°æ—¶</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="updateDetailTimeRange('7d')" data-i18n="time_7d">7å¤©</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="updateDetailTimeRange('30d')" data-i18n="time_30d">30å¤©</button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="updateDetailTimeRange('1y')" data-i18n="time_1y">å…¨å¹´</button>
                    </div>
                    <button class="btn btn-secondary btn-sm" onclick="showTab('dashboard')" data-i18n="back_to_dashboard">è¿”å›ä»ªè¡¨ç›˜</button>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" id="system-detail-tabs">
                                <li class="nav-item">
                                    <a class="nav-link active" href="#" onclick="switchDetailTab('cpu', event)" data-i18n="tab_cpu_load">CPU & è´Ÿè½½</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="switchDetailTab('mem', event)" data-i18n="tab_mem_usage">å†…å­˜ä½¿ç”¨</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="switchDetailTab('msg', event)" data-i18n="tab_msg_throughput">æ¶ˆæ¯åå</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="switchDetailTab('disk', event)" data-i18n="tab_disk_io">ç£ç›˜ & I/O</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#" onclick="switchDetailTab('net', event)" data-i18n="tab_net_traffic">ç½‘ç»œæµé‡</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <!-- Large Chart Container -->
                            <div style="height: 400px; position: relative;">
                                <canvas id="detailChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hardware Info Grid -->
            <div class="row" id="hardware-info-grid">
                <!-- Populated by JS -->
            </div>
        </div>

        <!-- Groups Tab -->
        <div id="tab-groups" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-start align-items-center mb-3 gap-2">
                <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center justify-content-start" type="button" id="global-bot-dropdown-groups" data-bs-toggle="dropdown" aria-expanded="false" style="min-width: 220px;">
                         <i class="bi bi-robot me-2"></i>
                         <span id="global-bot-selected-content-groups" class="text-truncate text-start" style="max-width: 160px;" data-i18n="select_bot_placeholder">é€‰æ‹©æœºå™¨äºº...</span>
                    </button>
                    <ul class="dropdown-menu shadow-lg global-bot-list-class" id="global-bot-list-groups" aria-labelledby="global-bot-dropdown-groups" style="max-height: 400px; overflow-y: auto; width: 320px;">
                        <!-- Items populated by JS -->
                    </ul>
                </div>
                <input type="hidden" id="global-bot-selector-groups" value="">
                
                <button class="btn btn-primary" onclick="refreshGroupList()" title="åˆ·æ–°åˆ—è¡¨" data-i18n-title="refresh_list">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>
                
                <button class="btn btn-danger" onclick="showMassSendModal('group')" title="ç¾¤å‘æ¶ˆæ¯">
                    <i class="bi bi-megaphone-fill me-1"></i> ç¾¤å‘æ¶ˆæ¯
                </button>
            </div>

            <div class="row" style="height: calc(100vh - 160px);">
                <!-- Left: Group List -->
                <div class="col-md-4 h-100 group-manage-col">
                    <div class="card h-100 d-flex flex-column">
                        <div class="card-header">
                            <input type="text" class="form-control mb-2" id="group-search" placeholder="æœç´¢ç¾¤ç»„..." data-i18n-placeholder="search_groups_placeholder" onkeyup="filterGroups()">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="form-check mb-0">
                                    <input class="form-check-input" type="checkbox" id="select-all-group" onclick="toggleSelectAll('group')">
                                    <label class="form-check-label small" for="select-all-group" data-i18n="select_all">å…¨é€‰</label>
                                </div>
                                <small class="text-muted"><span data-i18n="sort_by">æ’åº:</span></small>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button class="btn btn-outline-secondary active" onclick="sortGroups('name')" id="btn-sort-group-name" data-i18n="sort_name">åç§°</button>
                                    <button class="btn btn-outline-secondary" onclick="sortGroups('count')" id="btn-sort-group-count" data-i18n="sort_count">äººæ•°</button>
                                    <button class="btn btn-outline-secondary" onclick="sortGroups('msg_today')" id="btn-sort-group-msg_today" data-i18n="sort_today">ä»Šæ—¥</button>
                                    <button class="btn btn-outline-secondary" onclick="sortGroups('id')" id="btn-sort-group-id" data-i18n="sort_id">ID</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0" style="overflow-y: auto;">
                            <div class="list-group list-group-flush" id="group-list">
                                <div class="text-center p-4 text-muted" data-i18n="select_bot_first">è¯·å…ˆé€‰æ‹©æœºå™¨äººå¹¶åˆ·æ–°</div>
                            </div>
                        </div>
                        <div class="card-footer text-muted small" id="group-count">
                            <span data-i18n="total_groups_count">å…± 0 ä¸ªç¾¤ç»„</span>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Group Details -->
                <div class="col-md-8 h-100 group-manage-col">
                    <div class="card h-100" id="group-detail-empty">
                        <div class="card-body d-flex align-items-center justify-content-center text-muted">
                            <div class="text-center">
                                <i class="bi bi-chat-square-text fs-1"></i>
                                <p class="mt-2" data-i18n="select_group_to_view">è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªç¾¤ç»„æŸ¥çœ‹è¯¦æƒ…</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card h-100 d-flex flex-column" id="group-detail-content" style="display: none !important;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <img id="current-group-avatar" src="" class="rounded-circle me-2" style="width: 32px; height: 32px; display: none;">
                                <div class="d-flex flex-column">
                                    <h5 class="mb-0" id="current-group-name" data-i18n="group_name_default">ç¾¤ç»„åç§°</h5>
                                    <small class="text-muted" id="current-group-stats" style="font-size: 0.75rem;" data-i18n="group_stats_default">ä»Šæ—¥: 0 / æ€»è®¡: 0</small>
                                </div>
                            </div>
                            <span class="badge bg-secondary" id="current-group-id" data-i18n="group_id_label">ç¾¤ ID: 0</span>
                        </div>
                        
                        <div class="card-body d-flex flex-column p-0" style="overflow: hidden;">
                            <ul class="nav nav-tabs nav-justified" id="group-tabs-detail" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="members-tab" data-bs-toggle="tab" data-bs-target="#members-view" type="button" data-i18n="tab_members">æˆå‘˜åˆ—è¡¨</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="actions-tab-group" data-bs-toggle="tab" data-bs-target="#actions-view-group" type="button" data-i18n="tab_actions">å¿«æ·æ“ä½œ</button>
                                </li>
                            </ul>
                            
                            <div class="tab-content flex-grow-1" style="overflow-y: auto;">
                                <div class="tab-pane fade show active p-0" id="members-view">
                                    <div class="p-2 border-bottom bg-light">
                                        <input type="text" class="form-control form-control-sm" id="member-search" placeholder="æœç´¢æˆå‘˜(æ˜µç§°/ç¾¤åç‰‡/ID)..." data-i18n-placeholder="search_members_placeholder" onkeyup="renderMembers()">
                                    </div>
                                    <table class="table table-hover mb-0">
                                        <thead class="table-light sticky-top">
                                            <tr>
                                                <th style="cursor: pointer;" onclick="sortMembers('card')"><span data-i18n="col_member_name">æ˜µç§°/ç¾¤åç‰‡</span> <i class="bi bi-sort-alpha-down" id="sort-icon-card"></i></th>
                                                <th style="cursor: pointer;" onclick="sortMembers('id')"><span data-i18n="col_member_id">QQ/WXID</span> <i class="bi" id="sort-icon-id"></i></th>
                                                <th style="cursor: pointer;" onclick="sortMembers('role')"><span data-i18n="col_member_role">è§’è‰²</span> <i class="bi" id="sort-icon-role"></i></th>
                                                <th style="cursor: pointer;" onclick="sortMembers('msg_today')"><span data-i18n="col_member_msg">ä»Šæ—¥/æ€»è®¡ (å…¨ç¾¤)</span> <i class="bi" id="sort-icon-msg_today"></i></th>
                                                <th style="cursor: pointer;" onclick="sortMembers('time')"><span data-i18n="col_member_last_seen">æœ€åå‘è¨€</span> <i class="bi" id="sort-icon-time"></i></th>
                                                <th data-i18n="col_action">æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="member-list-body"></tbody>
                                    </table>
                                </div>
                                <div class="tab-pane fade p-3" id="actions-view-group">
                                    <div class="mb-3">
                                        <label class="form-label" data-i18n="send_group_msg">å‘é€ç¾¤æ¶ˆæ¯</label>
                                        <textarea class="form-control" id="group-msg-input" rows="4" placeholder="åœ¨æ­¤è¾“å…¥æ¶ˆæ¯å†…å®¹..." data-i18n-placeholder="input_msg_placeholder"></textarea>
                                        <div class="d-flex gap-2 mt-2">
                                            <button class="btn btn-primary" onclick="sendGroupMsg()">
                                                <i class="bi bi-send"></i> <span data-i18n="btn_send">å‘é€</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Friends Tab -->
        <div id="tab-friends" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-start align-items-center mb-3 gap-2">
                <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center justify-content-start" type="button" id="global-bot-dropdown-friends" data-bs-toggle="dropdown" aria-expanded="false" style="min-width: 220px;">
                         <i class="bi bi-robot me-2"></i>
                         <span id="global-bot-selected-content-friends" class="text-truncate text-start" style="max-width: 160px;" data-i18n="select_bot_placeholder">é€‰æ‹©æœºå™¨äºº...</span>
                    </button>
                    <ul class="dropdown-menu shadow-lg global-bot-list-class" id="global-bot-list-friends" aria-labelledby="global-bot-dropdown-friends" style="max-height: 400px; overflow-y: auto; width: 320px;">
                        <!-- Items populated by JS -->
                    </ul>
                </div>
                <input type="hidden" id="global-bot-selector-friends" value="">
                
                <button class="btn btn-primary" onclick="refreshFriendList()" title="åˆ·æ–°åˆ—è¡¨" data-i18n-title="refresh_list">
                    <i class="bi bi-arrow-clockwise"></i>
                </button>

                <button class="btn btn-success" onclick="showMassSendModal('private')" title="ç¾¤å‘ç§èŠ" data-i18n-title="mass_send_private">
                    <i class="bi bi-chat-dots-fill me-1"></i> <span data-i18n="mass_send_private">ç¾¤å‘ç§èŠ</span>
                </button>
            </div>

            <div class="row" style="height: calc(100vh - 160px);">
                <!-- Left: Friend List -->
                <div class="col-md-4 h-100 group-manage-col">
                    <div class="card h-100 d-flex flex-column">
                        <div class="card-header">
                            <input type="text" class="form-control mb-2" id="friend-search" placeholder="æœç´¢å¥½å‹..." data-i18n-placeholder="search_friends_placeholder" onkeyup="filterFriends()">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="form-check mb-0">
                                    <input class="form-check-input" type="checkbox" id="select-all-private" onclick="toggleSelectAll('private')">
                                    <label class="form-check-label small" for="select-all-private" data-i18n="select_all">å…¨é€‰</label>
                                </div>
                                <small class="text-muted"><span data-i18n="sort_by">æ’åº:</span></small>
                                <div class="btn-group btn-group-sm" role="group">
                                    <button class="btn btn-outline-secondary active" onclick="sortFriends('name')" id="btn-sort-friend-name" data-i18n="sort_name">åç§°</button>
                                    <button class="btn btn-outline-secondary" onclick="sortFriends('id')" id="btn-sort-friend-id" data-i18n="sort_id">ID</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0" style="overflow-y: auto;">
                            <div class="list-group list-group-flush" id="friend-list">
                                <div class="text-center p-4 text-muted" data-i18n="select_bot_first">è¯·å…ˆé€‰æ‹©æœºå™¨äººå¹¶åˆ·æ–°</div>
                            </div>
                        </div>
                        <div class="card-footer text-muted small" id="friend-count">
                            <span data-i18n="total_friends_count_default">å…± 0 ä¸ªå¥½å‹</span>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Friend Details -->
                <div class="col-md-8 h-100 group-manage-col">
                    <div class="card h-100" id="friend-detail-empty">
                        <div class="card-body d-flex align-items-center justify-content-center text-muted">
                            <div class="text-center">
                                <i class="bi bi-person-badge fs-1"></i>
                                <p class="mt-2" data-i18n="select_friend_to_view">è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªå¥½å‹æŸ¥çœ‹è¯¦æƒ…</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card h-100 d-flex flex-column" id="friend-detail-content" style="display: none !important;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <img id="current-friend-avatar" src="" class="rounded-circle me-2" style="width: 32px; height: 32px; display: none;">
                                <div class="d-flex flex-column">
                                    <h5 class="mb-0" id="current-friend-name" data-i18n="friend_name_default">å¥½å‹åç§°</h5>
                                    <small class="text-muted" id="current-friend-stats" style="font-size: 0.75rem;" data-i18n="friend_id_label">ID: 0</small>
                                </div>
                            </div>
                            <span class="badge bg-secondary" id="current-friend-id">123456</span>
                        </div>
                        
                        <div class="card-body p-3">
                            <div class="mb-3">
                                <label class="form-label" data-i18n="send_private_msg">å‘é€ç§èŠæ¶ˆæ¯</label>
                                <textarea class="form-control" id="friend-msg-input" rows="4" placeholder="åœ¨æ­¤è¾“å…¥æ¶ˆæ¯å†…å®¹..." data-i18n-placeholder="input_msg_placeholder"></textarea>
                                <div class="d-flex gap-2 mt-2">
                                    <button class="btn btn-primary" onclick="sendFriendMsg()">
                                        <i class="bi bi-send"></i> <span data-i18n="btn_send">å‘é€</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mass Send Modal -->
        <div class="modal fade" id="massSendModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" data-i18n="mass_send_title">æ‰¹é‡ç¾¤å‘æ¶ˆæ¯</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-warning" data-i18n="mass_send_warning">
                            æ³¨æ„ï¼šç¾¤å‘æ¶ˆæ¯å¯èƒ½å¯¼è‡´æœºå™¨äººè´¦å·è¢«å°ç¦ï¼Œè¯·è°¨æ…ä½¿ç”¨ï¼
                        </div>
                        <div class="mb-3">
                            <label class="form-label" data-i18n="mass_send_content_label">æ¶ˆæ¯å†…å®¹</label>
                            <textarea class="form-control" id="mass-send-content" rows="5" placeholder="è¯·è¾“å…¥è¦ç¾¤å‘çš„æ¶ˆæ¯å†…å®¹..." data-i18n-placeholder="mass_send_input_placeholder"></textarea>
                        </div>
                        <div id="mass-send-progress" class="progress d-none mb-2">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                        </div>
                        <div id="mass-send-status" class="small text-muted"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">å–æ¶ˆ</button>
                        <button type="button" class="btn btn-danger" onclick="executeMassSend()" data-i18n="mass_send_start_btn">å¼€å§‹ç¾¤å‘</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bots Tab -->
        <div id="tab-bots" class="tab-content" style="display:none;">
            <div class="row g-4 align-items-start">
                <!-- Left Column: Bots -->
                <div class="col-xl-7 col-lg-6">
                    <div class="card shadow-sm d-flex flex-column">
                        <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center flex-shrink-0">
                            <h5 class="mb-0"><i class="bi bi-robot me-2"></i><span data-i18n="tab_access_bots">æ¥å…¥ç«¯ (Bots)</span> <span id="badge-bots" class="badge bg-secondary ms-1">0</span></h5>
                            <div class="d-flex gap-2">
                                <input type="text" class="form-control form-control-sm" placeholder="æœç´¢æœºå™¨äºº..." data-i18n-placeholder="search_bots_placeholder" style="width: 150px;" onkeyup="filterBots(this.value)">
                                <button class="btn btn-sm btn-outline-primary" onclick="fetchBots()" data-i18n="refresh">åˆ·æ–°</button>
                            </div>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex flex-wrap gap-2 mb-3 flex-shrink-0">
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary" onclick="sortBots('name')" id="btn-sort-bot-name" data-i18n="sort_name">åç§°</button>
                                    <button class="btn btn-outline-secondary" onclick="sortBots('id')" id="btn-sort-bot-id" data-i18n="sort_id">ID</button>
                                    <button class="btn btn-outline-secondary" onclick="sortBots('platform')" id="btn-sort-bot-platform" data-i18n="sort_protocol">åè®®</button>
                                    <button class="btn btn-outline-secondary" onclick="sortBots('count')" id="btn-sort-bot-count" data-i18n="sort_group_count">ç¾¤æ•°</button>
                                    <button class="btn btn-outline-secondary" onclick="sortBots('msg')" id="btn-sort-bot-msg" data-i18n="sort_messages">æ¶ˆæ¯</button>
                                    <button class="btn btn-outline-secondary" onclick="sortBots('time')" id="btn-sort-bot-time" data-i18n="sort_time">æ—¶é—´</button>
                                </div>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary active" id="btn-bot-view-detail" onclick="setBotViewMode('detail')" title="è¯¦ç»†æ¨¡å¼" data-i18n-title="view_mode_detail"><i class="bi bi-card-text"></i></button>
                                    <button class="btn btn-outline-secondary" id="btn-bot-view-compact" onclick="setBotViewMode('compact')" title="ç²¾ç®€æ¨¡å¼" data-i18n-title="view_mode_compact"><i class="bi bi-grid-fill"></i></button>
                                </div>
                            </div>
                            <div class="row g-3 bot-list-container" id="bot-list-container">
                                <!-- Bot Cards -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Workers -->
                <div class="col-xl-5 col-lg-6">
                    <div class="card shadow-sm d-flex flex-column">
                        <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center flex-shrink-0">
                            <h5 class="mb-0"><i class="bi bi-cpu me-2"></i><span data-i18n="tab_process_workers">å¤„ç†ç«¯ (Workers)</span> <span id="badge-workers" class="badge bg-secondary ms-1">0</span></h5>
                            <div class="d-flex gap-2">
                                <input type="text" class="form-control form-control-sm" placeholder="æœç´¢Worker..." data-i18n-placeholder="search_workers_placeholder" style="width: 150px;" onkeyup="filterWorkers(this.value)">
                                <button class="btn btn-sm btn-outline-primary" onclick="fetchWorkers()" data-i18n="refresh">åˆ·æ–°</button>
                            </div>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <div class="d-flex flex-wrap gap-2 mb-3 flex-shrink-0">
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary" onclick="sortWorkers('addr')" id="btn-sort-worker-addr" data-i18n="sort_address">åœ°å€</button>
                                    <button class="btn btn-outline-secondary" onclick="sortWorkers('time')" id="btn-sort-worker-time" data-i18n="sort_time">æ—¶é—´</button>
                                    <button class="btn btn-outline-secondary" onclick="sortWorkers('msg')" id="btn-sort-worker-msg" data-i18n="sort_processed">å¤„ç†</button>
                                    <button class="btn btn-outline-secondary" onclick="sortWorkers('status')" id="btn-sort-worker-status" data-i18n="sort_status">çŠ¶æ€</button>
                                </div>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary active" id="btn-worker-view-detail" onclick="setWorkerViewMode('detail')" title="è¯¦ç»†æ¨¡å¼" data-i18n-title="view_mode_detail"><i class="bi bi-card-text"></i></button>
                                    <button class="btn btn-outline-secondary" id="btn-worker-view-compact" onclick="setWorkerViewMode('compact')" title="ç²¾ç®€æ¨¡å¼" data-i18n-title="view_mode_compact"><i class="bi bi-grid-fill"></i></button>
                                </div>
                            </div>
                            <div class="row g-3 worker-list-container" id="worker-list-container">
                                <!-- Worker Cards -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Overmind Tab Removed - Now opens in new window -->

        <!-- System Monitor (Merged Events & Logs) -->
        <div id="tab-monitor" class="tab-content" style="display:none; height: calc(100vh - 80px);">
            <ul class="nav nav-tabs mb-3" id="monitor-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="monitor-events-tab" data-bs-toggle="tab" data-bs-target="#view-events" type="button" role="tab" data-i18n="monitor_events">å®æ—¶æ¶ˆæ¯</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="monitor-logs-tab" data-bs-toggle="tab" data-bs-target="#view-logs" type="button" role="tab" onclick="fetchLogs()" data-i18n="monitor_logs">ç³»ç»Ÿæ—¥å¿—</button>
                </li>
            </ul>
            
            <div class="tab-content h-100">
                <!-- Real-time Events -->
                <div class="tab-pane fade show active h-100" id="view-events" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h5 class="mb-0" data-i18n="monitor_events_title">å®æ—¶æ¶ˆæ¯ç›‘æ§</h5>
                        <div>
                            <button class="btn btn-sm btn-outline-danger" onclick="clearEvents()" data-i18n="clear">æ¸…ç©º</button>
                            <div class="form-check form-switch d-inline-block ms-2">
                                <input class="form-check-input" type="checkbox" id="auto-scroll-events" checked>
                                <label class="form-check-label" for="auto-scroll-events" data-i18n="auto_scroll">è‡ªåŠ¨æ»šåŠ¨</label>
                            </div>
                            <span id="ws-status" class="badge bg-secondary ms-2">Disconnected</span>
                        </div>
                    </div>
                    <div class="log-box" id="event-container" style="height: calc(100% - 60px);">
                        <div class="text-muted text-center mt-5" data-i18n="waiting_events_connection">ç­‰å¾…äº‹ä»¶è¿æ¥...</div>
                    </div>
                </div>

                <!-- Logs -->
                <div class="tab-pane fade h-100" id="view-logs" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h5 class="mb-0" data-i18n="system_logs_title">ç³»ç»Ÿæ—¥å¿—</h5>
                        <div class="d-flex align-items-center">
                            <select class="form-select form-select-sm me-2" id="log-bot-selector" style="width: auto; min-width: 150px;" onchange="fetchLogs()">
                                <option value="">å…¨éƒ¨ (All)</option>
                                <option value="system">BotNexus System</option>
                            </select>
                            <button class="btn btn-sm btn-outline-secondary" onclick="fetchLogs()" data-i18n="refresh">åˆ·æ–°</button>
                            <div class="form-check form-switch d-inline-block ms-2">
                                <input class="form-check-input" type="checkbox" id="auto-refresh-logs" checked>
                                <label class="form-check-label" for="auto-refresh-logs" data-i18n="auto_refresh">è‡ªåŠ¨åˆ·æ–°</label>
                            </div>
                        </div>
                    </div>
                    <div class="log-box" id="log-container" style="height: calc(100% - 60px);">
                        <!-- Logs -->
                    </div>
                </div>
            </div>
        </div>




        <!-- Docker Tab -->
        <div id="tab-docker" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="mb-0" data-i18n="sidebar_docker">Dockerç®¡ç†</h4>
                <div class="d-flex align-items-center">
                    <div class="input-group input-group-sm me-2" style="width: 200px;">
                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                        <input type="text" class="form-control" id="docker-search-input" placeholder="æœç´¢å®¹å™¨..." data-i18n-placeholder="search_placeholder" oninput="filterDockerContainers()">
                    </div>
                    <button class="btn btn-sm btn-outline-primary me-2" onclick="addBotContainer()">
                        <i class="bi bi-plus-lg"></i> <span data-i18n="docker_add_bot">æ·»åŠ æœºå™¨äºº</span>
                    </button>
                    <button class="btn btn-sm btn-outline-success me-2" onclick="addWorkerContainer()">
                        <i class="bi bi-plus-lg"></i> <span data-i18n="docker_add_node">æ·»åŠ èŠ‚ç‚¹</span>
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="loadDockerContainers()">
                        <i class="bi bi-arrow-clockwise"></i> <span data-i18n="refresh">åˆ·æ–°</span>
                    </button>
                </div>
            </div>
            <div class="card">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th data-i18n="docker_container_id">ID</th>
                                <th>Names</th>
                                <th data-i18n="docker_image">Image</th>
                                <th data-i18n="docker_status">State</th>
                                <th data-i18n="docker_status">Status</th>
                                <th data-i18n="docker_action">Action</th>
                            </tr>
                        </thead>
                        <tbody id="docker-container-list">
                            <tr><td colspan="6" class="text-center text-muted" data-i18n="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Routing Tab -->
        <div id="tab-routing" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="d-flex align-items-center">
                    <h4 class="mb-0 me-2" data-i18n="sidebar_routing">è·¯ç”±ç®¡ç†</h4>
                    <button class="btn btn-sm btn-outline-info" onclick="toggleRoutingHelp()" data-i18n-title="routing_help_tooltip" title="ä½¿ç”¨è¯´æ˜">
                        <i class="bi bi-question-circle"></i>
                    </button>
                </div>
                <div>
                    <button class="btn btn-sm btn-outline-primary me-2" onclick="showAddRoutingRuleDialog()">
                        <i class="bi bi-plus-lg"></i> <span data-i18n="routing_add_rule">æ·»åŠ è·¯ç”±è§„åˆ™</span>
                    </button>
                    <button class="btn btn-sm btn-primary" onclick="fetchRoutingRules()">
                        <i class="bi bi-arrow-clockwise"></i> <span data-i18n="refresh">åˆ·æ–°</span>
                    </button>
                </div>
            </div>

            <!-- è·¯ç”±è§„åˆ™ä½¿ç”¨è¯´æ˜ -->
            <div class="alert alert-info mb-4" id="routing-help-section" style="display: none;">
                <div class="d-flex align-items-start">
                    <i class="bi bi-info-circle-fill me-2 mt-1"></i>
                    <div>
                        <h6 class="alert-heading mb-2" data-i18n="routing_usage_title">ğŸ“‹ è·¯ç”±è§„åˆ™ä½¿ç”¨è¯´æ˜</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <p class="mb-1"><strong data-i18n="routing_pattern_format">ğŸ¯ åŒ¹é…æ¨¡å¼æ ¼å¼ï¼š</strong></p>
                                <ul class="small mb-2">
                                <li><code>user_123456</code> - ç²¾ç¡®åŒ¹é…ç”¨æˆ·IDï¼ˆ123456ï¼‰</li>
                                <li><code>group_789012</code> - ç²¾ç¡®åŒ¹é…ç¾¤ç»„IDï¼ˆ789012ï¼‰</li>
                                <li><code>*_test</code> - é€šé…ç¬¦åŒ¹é…ï¼ˆä»¥_testç»“å°¾ï¼‰</li>
                                <li><code>123*</code> - é€šé…ç¬¦åŒ¹é…ï¼ˆä»¥123å¼€å¤´ï¼‰</li>
                            </ul>
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong data-i18n="routing_target_format">ğŸ”„ ç›®æ ‡èŠ‚ç‚¹æ ¼å¼ï¼š</strong></p>
                            <ul class="small mb-2">
                                <li><code>worker_1</code> - æŒ‡å®šå·¥ä½œèŠ‚ç‚¹</li>
                                <li><code>worker_2</code> - æŒ‡å®šå·¥ä½œèŠ‚ç‚¹</li>
                                <li><code>default</code> - é»˜è®¤å¤„ç†èŠ‚ç‚¹</li>
                            </ul>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <p class="mb-1"><strong data-i18n="routing_priority_rules">âš¡ ä¼˜å…ˆçº§è§„åˆ™ï¼š</strong></p>
                                <ul class="small mb-0">
                                    <li>ç²¾ç¡®åŒ¹é… > é€šé…ç¬¦åŒ¹é…</li>
                                    <li>å…ˆæ·»åŠ çš„è§„åˆ™ä¼˜å…ˆåŒ¹é…</li>
                                    <li>æ— åŒ¹é…æ—¶ä½¿ç”¨é»˜è®¤å¤„ç†</li>
                                </ul>
                            </div>
                        </div>
                        <hr>
                        <p class="small mb-0" data-i18n="routing_example_usage">ğŸ’¡ ç¤ºä¾‹ï¼šå°†ç”¨æˆ·123456çš„æ¶ˆæ¯è·¯ç”±åˆ°worker_1å¤„ç†ï¼Œè®¾ç½®åŒ¹é…æ¨¡å¼ä¸º"user_123456"ï¼Œç›®æ ‡èŠ‚ç‚¹ä¸º"worker_1"</p>
                    </div>
                </div>
            </div>
            
            <div class="row" id="routing-list-container">
                <!-- Routing Rule Cards -->
                <div class="col-12 text-center text-muted">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-2" data-i18n="loading_routing_rules">æ­£åœ¨åŠ è½½è·¯ç”±è§„åˆ™...</p>
                </div>
            </div>
        </div>

        <!-- Visualization Tab -->
        <div id="tab-visualization" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="mb-0"><i class="bi bi-broadcast"></i> <span data-i18n="sidebar_visualization">è½¬å‘å¯è§†åŒ–</span></h4>
                <div class="d-flex gap-3 align-items-center">
                    <div class="text-muted small">
                        <span class="badge bg-primary me-1" style="width: 12px; height: 12px; padding: 0; display: inline-block;"> </span> <span data-i18n="viz_bot">Bot</span>
                        <span class="badge bg-success ms-2 me-1" style="width: 12px; height: 12px; padding: 0; display: inline-block;"> </span> <span data-i18n="viz_nexus">Nexus</span>
                        <span class="badge bg-warning ms-2 me-1" style="width: 12px; height: 12px; padding: 0; display: inline-block;"> </span> <span data-i18n="viz_worker">Worker</span>
                    </div>
                    <button id="btn-fullscreen" class="btn btn-outline-info btn-sm" onclick="toggleFullScreen()">
                        <i id="icon-fullscreen" class="bi bi-arrows-fullscreen"></i> <span id="text-fullscreen" data-i18n="full_screen">å…¨å±</span>
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" onclick="clearVisualization()">
                        <i class="bi bi-trash"></i> <span data-i18n="clear">æ¸…é™¤</span>
                    </button>
                </div>
            </div>
            <div id="visualization-container">
                <canvas id="viz-canvas"></canvas>
                <div id="viz-nodes"></div>
            </div>
        </div>

        <!-- Logs Tab (Full Page) -->
        <div id="tab-logs" class="tab-content" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="mb-0" data-i18n="log_center">æ—¥å¿—ä¸­å¿ƒ</h4>
                <div class="d-flex align-items-center">
                    <select class="form-select form-select-sm me-2" id="log-bot-selector-full" style="width: auto; min-width: 200px;" onchange="fetchLogsFull()">
                        <option value="">å…¨éƒ¨ (All)</option>
                        <option value="system">BotNexus System</option>
                    </select>
                    <button class="btn btn-sm btn-outline-secondary" onclick="fetchLogsFull()" data-i18n="refresh">åˆ·æ–°</button>
                    <div class="form-check form-switch d-inline-block ms-3">
                        <input class="form-check-input" type="checkbox" id="auto-refresh-logs-full" checked>
                        <label class="form-check-label" for="auto-refresh-logs-full" data-i18n="auto_refresh">è‡ªåŠ¨åˆ·æ–°</label>
                    </div>
                </div>
            </div>
            
            <div class="card h-100" style="height: calc(100vh - 150px) !important;">
                <div class="card-body p-0 d-flex flex-column h-100">
                    <div class="log-box flex-grow-1" id="log-container-full" style="border: none; border-radius: 0 0 0.75rem 0.75rem;">
                        <!-- Logs -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Debug & Test (Merged) -->
        <div id="tab-debug" class="tab-content" style="display:none;">
            <h4 class="mb-4" data-i18n="debug_test_title">è°ƒè¯•æµ‹è¯•</h4>
            
            <ul class="nav nav-tabs mb-3" id="debug-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="debug-visual-tab" data-bs-toggle="tab" data-bs-target="#debug-visual" type="button" role="tab" data-i18n="debug_msg_builder">æ¶ˆæ¯æ„é€ </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="debug-raw-tab" data-bs-toggle="tab" data-bs-target="#debug-raw" type="button" role="tab" data-i18n="debug_api_test">æ¥å£è°ƒè¯•</button>
                </li>
            </ul>

            <div class="tab-content">
                <!-- Visual Sender -->
                <div class="tab-pane fade show active" id="debug-visual" role="tabpanel">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="card mb-3">
                                <div class="card-header" data-i18n="send_message_card_title">å‘é€æ¶ˆæ¯</div>
                                <div class="card-body">
                                    <form id="msg-test-form" onsubmit="return false;">
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="target_uid_label">ç›®æ ‡ç”¨æˆ·/ç¾¤ç»„ UID</label>
                                            <div class="input-group mb-2">
                                                <select class="form-select" id="mt-group-select" onchange="onTestGroupSelectChange()">
                                                    <option value="" data-i18n="select_group_placeholder">-- é€‰æ‹©ç¾¤ç»„ (æˆ–æ‰‹åŠ¨è¾“å…¥ UID) --</option>
                                                </select>
                                                <button class="btn btn-outline-secondary" type="button" onclick="loadTestGroups()" title="åˆ·æ–°ç¾¤ç»„åˆ—è¡¨"><i class="bi bi-arrow-clockwise"></i></button>
                                            </div>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="mt-target" placeholder="ç¾¤å· (Group ID) æˆ– QQå· (User ID)" data-i18n-placeholder="target_uid_placeholder" oninput="updateCodePreview()">
                                                <button class="btn btn-outline-secondary" type="button" onclick="pasteTargetUid()" data-i18n="paste_selected">ç²˜è´´é€‰ä¸­</button>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="message_type_label">æ¶ˆæ¯ç±»å‹</label>
                                            <select class="form-select" id="mt-type" onchange="updateMsgForm(); updateCodePreview()">
                                                <option value="text" data-i18n="msg_type_text">æ–‡æœ¬ (Text / CQ Code)</option>
                                                <option value="image" data-i18n="msg_type_image">å›¾ç‰‡ (Image)</option>
                                                <option value="record" data-i18n="msg_type_record">è¯­éŸ³ (Record)</option>
                                                <option value="video" data-i18n="msg_type_video">è§†é¢‘ (Video)</option>
                                                <option value="music" data-i18n="msg_type_music">éŸ³ä¹åˆ†äº« (Music)</option>
                                                <option value="share" data-i18n="msg_type_share">é“¾æ¥åˆ†äº« (Share)</option>
                                                <option value="poke" data-i18n="msg_type_poke">æˆ³ä¸€æˆ³ (Poke)</option>
                                                <option value="json" data-i18n="msg_type_json">JSON å¡ç‰‡</option>
                                                <option value="xml" data-i18n="msg_type_xml">XML å¡ç‰‡</option>
                                            </select>
                                        </div>
                                        
                                        <!-- Text Input -->
                                        <div id="mt-group-text" class="mb-3">
                                            <label class="form-label" data-i18n="message_content_label">å†…å®¹</label>
                                            <textarea class="form-control" id="mt-content" rows="3" placeholder="è¾“å…¥æ–‡æœ¬å†…å®¹..." data-i18n-placeholder="enter_text_content_placeholder" oninput="updateCodePreview()"></textarea>
                                        </div>
                                        
                                        <!-- File/Image Input -->
                                        <div id="mt-group-file" class="mb-3" style="display:none;">
                                            <label class="form-label" id="mt-file-label" data-i18n="file_image_url_label">æ–‡ä»¶/å›¾ç‰‡ URL</label>
                                            <input type="text" class="form-control" id="mt-file-path" placeholder="http://... or file://..." data-i18n-placeholder="file_url_placeholder" oninput="updateCodePreview()">
                                        </div>
        
                                        <!-- Music Input -->
                                <div id="mt-group-music" class="mb-3" style="display:none;">
                                    <label class="form-label" data-i18n="music_share_label">éŸ³ä¹åˆ†äº«</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text" data-i18n="platform_label">å¹³å°</span>
                                        <select class="form-select" id="mt-music-type" onchange="updateCodePreview()">
                                            <option value="qq" data-i18n="platform_qq">QQéŸ³ä¹</option>
                                            <option value="163" data-i18n="platform_163">ç½‘æ˜“äº‘éŸ³ä¹</option>
                                            <option value="migu" data-i18n="platform_migu">å’ªå’•éŸ³ä¹</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <span class="input-group-text" data-i18n="song_id_label">æ­Œæ›²ID</span>
                                        <input type="text" class="form-control" id="mt-music-id" placeholder="ä¾‹å¦‚: 123456" oninput="updateCodePreview()">
                                    </div>
                                </div>
        
                                        <!-- Share Input -->
                                        <div id="mt-group-share" class="mb-3" style="display:none;">
                                            <label class="form-label" data-i18n="link_share_label">é“¾æ¥åˆ†äº«</label>
                                            <input type="text" class="form-control mb-2" id="mt-share-url" placeholder="è·³è½¬ URL" data-i18n-placeholder="redirect_url_placeholder" oninput="updateCodePreview()">
                                            <input type="text" class="form-control mb-2" id="mt-share-title" placeholder="æ ‡é¢˜" data-i18n-placeholder="title_placeholder" oninput="updateCodePreview()">
                                            <input type="text" class="form-control mb-2" id="mt-share-content" placeholder="å†…å®¹æè¿°" data-i18n-placeholder="content_desc_placeholder" oninput="updateCodePreview()">
                                            <input type="text" class="form-control" id="mt-share-image" placeholder="å°é¢å›¾ç‰‡ URL" data-i18n-placeholder="cover_image_url_placeholder" oninput="updateCodePreview()">
                                        </div>
                                        
                                        <!-- JSON/XML Input -->
                                        <div id="mt-group-raw" class="mb-3" style="display:none;">
                                            <label class="form-label" id="mt-raw-label" data-i18n="raw_content_label">å†…å®¹</label>
                                            <textarea class="form-control font-monospace" id="mt-raw-content" rows="5" placeholder='{"app":"com.tencent.miniapp", ...}' oninput="updateCodePreview()"></textarea>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button class="btn btn-primary" onclick="submitTestMsg()" data-i18n="send_msg">å‘é€æ¶ˆæ¯</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="card mb-3">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span data-i18n="code_preview_title">ä»£ç é¢„è§ˆ (JSON)</span>
                                    <button class="btn btn-sm btn-outline-secondary py-0" onclick="copyCodePreview()" data-i18n="copy">å¤åˆ¶</button>
                                </div>
                                <div class="card-body bg-light p-0 position-relative">
                                    <pre id="code-preview" class="p-3 mb-0" style="white-space: pre-wrap; font-size: 0.8rem; color: #d63384; max-height: 300px; overflow-y: auto;">{}</pre>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" data-i18n="send_result_title">å‘é€ç»“æœ</div>
                                <div class="card-body p-3">
                                     <div id="mt-result" class="alert alert-secondary mb-0" role="alert" style="display:none;"></div>
                                </div>
                            </div>
                            <div class="mt-3 text-muted small">
                                <ul>
                                    <li data-i18n="debug_help_1">åœ¨æ­¤é¡µé¢å¯è§†åŒ–çš„æ„é€ æ¶ˆæ¯ï¼Œå¹¶å®æ—¶æŸ¥çœ‹å¯¹åº”çš„ JSON æ•°æ®ç»“æ„ã€‚</li>
                                    <li data-i18n="debug_help_2">æ”¯æŒ OneBot 11 æ ‡å‡†æ¶ˆæ¯ç±»å‹ã€‚</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Raw API -->
                <div class="tab-pane fade" id="debug-raw" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header" data-i18n="send_action_title">å‘é€ Action</div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label" data-i18n="bot_id_label">Bot ID</label>
                                        <input type="text" class="form-control" id="action-bot-id" placeholder="ç•™ç©ºåˆ™éšæœºé€‰æ‹©" data-i18n-placeholder="action_bot_id_placeholder">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" data-i18n="action_name_label">Action Name</label>
                                        <input type="text" class="form-control" id="action-name" value="send_group_msg">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" data-i18n="action_params_label">Params (JSON)</label>
                                        <textarea class="form-control font-monospace" id="action-params" rows="5">{"group_id": 123456, "message": "Hello from Go Manager"}</textarea>
                                    </div>
                                    <button class="btn btn-primary" onclick="sendAction()" data-i18n="send_request_btn">å‘é€è¯·æ±‚</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header" data-i18n="response_result_title">å“åº”ç»“æœ</div>
                                <div class="card-body bg-light">
                                    <pre id="action-result" class="mb-0" data-i18n="waiting_request">ç­‰å¾…è¯·æ±‚...</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Users Tab -->
        <div id="tab-users" class="tab-content" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="m-0" data-i18n="users_title">ç”¨æˆ·ç®¡ç†</h4>
                <button class="btn btn-primary" onclick="showCreateUserModal()">
                    <i class="bi bi-person-plus"></i> <span data-i18n="add_user_btn">æ·»åŠ ç”¨æˆ·</span>
                </button>
            </div>
            
            <div class="card">
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th data-i18n="user_col_id">ID</th>
                                    <th data-i18n="user_col_username">ç”¨æˆ·å</th>
                                    <th data-i18n="user_col_role">è§’è‰²</th>
                                    <th data-i18n="user_col_created">åˆ›å»ºæ—¶é—´</th>
                                    <th class="text-end" data-i18n="user_col_actions">æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users list will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="tab-settings" class="tab-content" style="display:none;">
            <h4 class="mb-4" data-i18n="settings_title">ç³»ç»Ÿè®¾ç½®</h4>
            
            <ul class="nav nav-tabs mb-4" id="settingsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="settings-basic-tab" data-bs-toggle="tab" data-bs-target="#settings-basic" type="button" role="tab" aria-controls="settings-basic" aria-selected="true" data-i18n="settings_basic">åŸºç¡€è®¾ç½®</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="settings-security-tab" data-bs-toggle="tab" data-bs-target="#settings-security" type="button" role="tab" aria-controls="settings-security" aria-selected="false" data-i18n="settings_security">å®‰å…¨è®¾ç½®</button>
                </li>
                <li class="nav-item admin-only" role="presentation" id="settings-server-nav" style="display:none;">
                    <button class="nav-link" id="settings-server-tab" data-bs-toggle="tab" data-bs-target="#settings-server" type="button" role="tab" aria-controls="settings-server" aria-selected="false" data-i18n="settings_server">æœåŠ¡å™¨é…ç½®</button>
                </li>
            </ul>

            <div class="tab-content" id="settingsTabContent">
                <!-- Basic Settings Pane -->
                <div class="tab-pane fade show active" id="settings-basic" role="tabpanel" aria-labelledby="settings-basic-tab">
                    <div class="row">
                        <!-- Common Settings -->
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header" data-i18n="common_settings_title">å¸¸ç”¨è®¾ç½®</div>
                                <div class="card-body">
                                    <form>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="theme_label">ç•Œé¢ä¸»é¢˜</label>
                                            <select class="form-select" onchange="setTheme(this.value)">
                                                <option value="light" data-i18n="theme_light">æµ…è‰² (Light)</option>
                                                <option value="dark" data-i18n="theme_dark">æ·±è‰² (Dark)</option>
                                                <option value="auto" data-i18n="theme_auto">è·Ÿéšç³»ç»Ÿ (Auto)</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="refresh_rate_label">æ•°æ®åˆ·æ–°é¢‘ç‡</label>
                                            <select id="setting-refresh-rate" class="form-select" onchange="updateRefreshRate(this.value)">
                                                <option value="2000" data-i18n="rate_fast">2 ç§’ (å¿«é€Ÿ)</option>
                                                <option value="5000" data-i18n="rate_normal">5 ç§’ (æ­£å¸¸)</option>
                                                <option value="10000" data-i18n="rate_slow">10 ç§’ (çœæµ)</option>
                                            </select>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="setting-notify" checked>
                                            <label class="form-check-label" for="setting-notify" data-i18n="enable_notification_label">å¯ç”¨æ¡Œé¢é€šçŸ¥</label>
                                        </div>
                                        <button type="button" class="btn btn-primary" data-i18n="save_common_settings_btn">ä¿å­˜å¸¸ç”¨è®¾ç½®</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Personal Preferences -->
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header"><i class="bi bi-person-gear me-2"></i><span data-i18n="personal_settings_title">ä¸ªäººåå¥½è®¾ç½®</span></div>
                                <div class="card-body">
                                     <form>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="default_home_label">é»˜è®¤é¦–é¡µ</label>
                                            <select id="setting-default-home" class="form-select" onchange="localStorage.setItem('default_home', this.value)">
                                                <option value="dashboard" data-i18n="dashboard_label">ä»ªè¡¨ç›˜</option>
                                                <option value="bots" data-i18n="bot_list_label">æœºå™¨äººåˆ—è¡¨</option>
                                                <option value="groups" data-i18n="group_manage_label">ç¾¤ç»„ç®¡ç†</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="items_per_page_label">æ¯é¡µæ˜¾ç¤ºæ¡æ•°</label>
                                            <input type="number" id="setting-items-per-page" class="form-control" value="20" onchange="localStorage.setItem('items_per_page', this.value)">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Settings Pane -->
                <div class="tab-pane fade" id="settings-security" role="tabpanel" aria-labelledby="settings-security-tab">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4 border-warning">
                                <div class="card-header bg-warning text-dark"><i class="bi bi-shield-lock me-2"></i><span data-i18n="change_password_label">ä¿®æ”¹å¯†ç </span></div>
                                <div class="card-body">
                                    <form onsubmit="event.preventDefault(); updatePassword();">
                                        <div class="mb-3">
                                            <input type="password" id="pwd-current" class="form-control mb-2" placeholder="å½“å‰å¯†ç " data-i18n-placeholder="current_pwd_placeholder">
                                            <input type="password" id="pwd-new" class="form-control mb-2" placeholder="æ–°å¯†ç " data-i18n-placeholder="new_pwd_placeholder">
                                            <input type="password" id="pwd-confirm" class="form-control" placeholder="ç¡®è®¤æ–°å¯†ç " data-i18n-placeholder="confirm_pwd_placeholder">
                                        </div>
                                        <button type="submit" class="btn btn-warning w-100" data-i18n="save_password_btn">æ›´æ–°ç™»å½•å¯†ç </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Server Settings Pane -->
                <div class="tab-pane fade admin-only" id="settings-server" role="tabpanel" aria-labelledby="settings-server-tab" style="display:none;">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card mb-4 border-primary">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-server me-2"></i> <span data-i18n="backend_config_title">åç«¯æœåŠ¡é…ç½® (ç®¡ç†å‘˜)</span>
                                </div>
                                <div class="card-body">
                                    <form id="backend-config-form">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_ws_port">WebSocket æœåŠ¡ç«¯å£</label>
                                                    <input type="text" id="cfg-ws-port" class="form-control" placeholder=":3001">
                                                    <div class="form-text" data-i18n="config_ws_port_help">Bot å’Œ Worker è¿æ¥ä½¿ç”¨çš„ç«¯å£ï¼Œéœ€åŒ…å«å†’å· (ä¾‹å¦‚ :3001)</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_webui_port">WebUI æœåŠ¡ç«¯å£</label>
                                                    <input type="text" id="cfg-webui-port" class="form-control" placeholder=":5000">
                                                    <div class="form-text" data-i18n="config_webui_port_help">ç®¡ç†åå°ç•Œé¢è®¿é—®ç«¯å£ï¼Œéœ€åŒ…å«å†’å· (ä¾‹å¦‚ :5000)</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_redis_addr">Redis åœ°å€</label>
                                                    <input type="text" id="cfg-redis-addr" class="form-control" placeholder="127.0.0.1:6379">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_redis_pwd">Redis å¯†ç </label>
                                                    <input type="password" id="cfg-redis-pwd" class="form-control" placeholder="******">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_admin_pwd">é»˜è®¤ç®¡ç†å‘˜å¯†ç </label>
                                                    <input type="text" id="cfg-admin-pwd" class="form-control" placeholder="admin123">
                                                    <div class="form-text" data-i18n="config_admin_pwd_help">æ–°éƒ¨ç½²ç³»ç»Ÿæ—¶çš„é»˜è®¤å¯†ç </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label" data-i18n="config_stats_file">ç»Ÿè®¡æ•°æ®å­˜å‚¨æ–‡ä»¶</label>
                                                    <input type="text" id="cfg-stats-file" class="form-control" placeholder="stats.json">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" data-i18n="config_jwt_secret">JWT å¯†é’¥ (æ…æ”¹)</label>
                                            <input type="text" id="cfg-jwt-secret" class="form-control">
                                            <div class="form-text" data-i18n="config_jwt_secret_help">ä¿®æ”¹æ­¤é¡¹ä¼šå¯¼è‡´æ‰€æœ‰å·²ç™»å½•ç”¨æˆ· Token å¤±æ•ˆ</div>
                                        </div>
                                        <div class="alert alert-warning">
                                            <i class="bi bi-exclamation-triangle me-2"></i> <span data-i18n="config_restart_warning">æ³¨æ„ï¼šä¿®æ”¹ç«¯å£æˆ– Redis é…ç½®åï¼Œé€šå¸¸éœ€è¦æ‰‹åŠ¨é‡å¯åç«¯æœåŠ¡æ‰èƒ½å®Œå…¨ç”Ÿæ•ˆã€‚</span>
                                        </div>
                                        <button type="button" class="btn btn-primary" onclick="updateBackendConfig()" data-i18n="config_save">ä¿å­˜åç«¯é…ç½®</button>
                                        <button type="button" class="btn btn-outline-secondary ms-2" onclick="loadBackendConfig()" data-i18n="config_reload">é‡æ–°åŠ è½½</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Routing Rule Modal -->
    <div class="modal fade" id="routingRuleModal" tabindex="-1" aria-labelledby="routingRuleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="routingRuleModalLabel" data-i18n="routing_add_rule">æ·»åŠ è·¯ç”±è§„åˆ™</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="routing-rule-form">
                        <div class="mb-3">
                            <label for="routing-pattern" class="form-label" data-i18n="routing_pattern">åŒ¹é…æ¨¡å¼</label>
                            <input type="text" class="form-control" id="routing-pattern" placeholder="group_123, user_456, *" data-i18n-placeholder="routing_pattern_placeholder">
                            <div class="form-text" data-i18n="routing_pattern_help">æ”¯æŒé€šé…ç¬¦*ï¼Œå¤šä¸ªæ¨¡å¼ç”¨é€—å·åˆ†éš”</div>
                        </div>
                        <div class="mb-3">
                            <label for="routing-target" class="form-label" data-i18n="routing_target">ç›®æ ‡åœ°å€</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="routing-target" placeholder="ws://localhost:8080, http://example.com" data-i18n-placeholder="routing_target_placeholder">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-i18n="select_worker">é€‰æ‹©èŠ‚ç‚¹</button>
                                <ul class="dropdown-menu dropdown-menu-end" id="worker-select-dropdown">
                                    <!-- Workers will be populated here -->
                                </ul>
                            </div>
                            <div class="form-text" data-i18n="routing_target_help">æ¶ˆæ¯è½¬å‘ç›®æ ‡åœ°å€</div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="routing-enabled" checked>
                                <label class="form-check-label" for="routing-enabled" data-i18n="routing_enabled">å¯ç”¨è§„åˆ™</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">å–æ¶ˆ</button>
                    <button type="button" class="btn btn-primary" onclick="saveRoutingRule()" data-i18n="save">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>    
</body>
</html>
