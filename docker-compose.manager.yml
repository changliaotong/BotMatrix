version: '3.8'

networks:
  default:
    external:
      name: botmatrix_net

services:
  # 1. Go 管理平台服务 (Manager)
  bot-manager:
    build: 
      context: ./BotNexus
    container_name: btmgr
    restart: always
    pid: host
    ports:
      - "${WEB_PORT:-5000}:5000"  # WebUI
      - "${WS_PORT:-3002}:3001"  # WebSocket Gateway
    volumes:
      - ./BotNexus/stats.json:/app/stats.json
    environment:
      - TZ=Asia/Shanghai
      - REDIS_ADDR=${REDIS_ADDR:-192.168.0.126:6379}
      - REDIS_PWD=${REDIS_PWD:-redis_zsYik8}
