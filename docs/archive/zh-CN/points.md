# 积分财务系统 (Points Financial System)

## 1. 核心概念：会计分录模式
本系统不再是简单的数值加减，而是采用了**金融级复式记账（Double-entry Bookkeeping）**模型。

- **借贷必相等**：每一笔积分的产生或消耗，都必须有明确的来源账户和去向账户。
- **系统总账平衡**：系统内所有账户的余额总和始终为 0（考虑到储备账户为负数表示发行量）。

## 2. 账户体系
- **用户账户 (User)**：普通用户的个人钱包。
- **系统储备账户 (SystemReserve)**：积分的发行源头（如签到奖励、任务奖励）。该账户余额通常为负，绝对值代表系统已发行的积分总量。
- **系统收益账户 (SystemRevenue)**：积分的回收去向（如手续费、购买系统道具）。
- **商家账户 (Merchant)**：第三方插件或商家的结算账户。

## 3. 指令格式
- `积分` 或 `balance`: 查询当前账户余额及最近流水。
- `签到`: 每日签到获取积分奖励。
- `财务报表`: [管理员] 查看全系统的积分发行、流通及回收数据。

## 4. 开发者接口 (Skill API)
其他插件可以通过 `Skill` 调用积分系统：

### `points.transfer` (转账分录)
参数：
- `from`: 付款方 ID (UserId 或系统账户 ID)
- `to`: 收款方 ID
- `amount`: 金额 (long)
- `desc`: 交易摘要 (用于生成分类账)

### `points.get_balance` (查询余额)
参数：`userId` (string)
返回：`long` 余额

## 5. 会计示例
### 用户签到 (100积分)
- **借 (Debit)**: 用户账户 (+100)
- **贷 (Credit)**: 系统储备账户 (-100)
- **摘要**: "每日签到奖励"

### 购买坐骑 (500积分)
- **借 (Debit)**: 系统收益账户 (+500)
- **贷 (Credit)**: 用户账户 (-500)
- **摘要**: "购买坐骑: 烈焰马"

---
**版本**: 1.1.0 (Financial Edition)
**特性**: 有进必有出，借贷必相等
