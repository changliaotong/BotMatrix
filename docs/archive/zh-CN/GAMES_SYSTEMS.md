# BotMatrix 游戏系统插件文档

本文档介绍 BotMatrix 中集成的趣味游戏系统，包括修炼系统、礼物系统和江湖闷砖系统。

---

## 1. 玄幻修炼系统 (Cultivation System)

### 1.1 系统简介
模拟修仙小说的境界晋升机制。用户通过持续修炼积累灵力，冲击境界瓶颈，最终追求飞升成仙。

### 1.2 核心机制
- **修炼 (Cultivate)**：每 10 分钟可进行一次，获得随机修为。
- **境界 (Stages)**：分为炼气、筑基、金丹、元婴、化神、炼虚、合体、大乘、渡劫、飞升等阶段，每阶 10 层。
- **突破 (Breakthrough)**：修为圆满后需手动突破。突破成功率随境界提升而降低，失败可能导致修为倒退。
- **排行榜**：实时展示修仙界的前十名强者。

### 1.3 指令列表
- `修炼` / `修行`：吸收天地灵气，增加修为。
- `突破` / `晋升`：冲击更高境界。
- `境界` / `修为`：查看个人当前修仙进度、境界和冷却状态。
- `修为榜` / `强者榜`：查看修仙界的顶级强者排行。

---

## 2. 礼物互动系统 (Gift System)

### 2.1 系统简介
旨在增强群内社交互动的礼物赠送系统。用户可购买精美礼物赠送他人，传达情谊。

### 2.2 核心机制
- **礼物商店**：展示所有可选礼物及其积分价格（包含普通礼物和高级礼物）。
- **个人背包**：存储用户已购买但未送出的礼物。
- **赠送回馈**：当用户赠送礼物时，目标用户会获得相当于礼物价值 50% 的积分回馈。
- **互动记录**：记录最近 10 条收送礼日志。

### 2.3 指令列表
- `礼物商店` / `礼物列表`：查看商店中出售的礼物。
- `购买礼物 <名称> [数量]`：消耗积分购买指定礼物到背包。
- `我的背包` / `我的礼物`：查看个人拥有的礼物种类和数量。
- `送礼物 @某人 <名称> [数量]`：将背包中的礼物赠送给指定的群成员。
- `礼物日志` / `礼物记录`：查看个人近期的礼物往来明细。

---

## 3. 江湖闷砖系统 (Brick System)

### 3.1 系统简介
一款充满风险与乐趣的竞技插件。用户可以消耗积分使用“板砖”攻击目标，使其被禁言。

### 3.2 核心机制
- **拍砖成本**：每次操作消耗 50 积分。
- **成功与失败**：基础成功率为 65%。成功则对方被禁言 5 分钟；失败则扣除 20 积分。
- **反噬机制**：失败时有 40% 的概率遭到反噬，导致自己被禁言 5 分钟。
- **冷却时间**：每次操作后有 5 分钟的冷却期。

### 3.3 指令列表
- `拍砖 @某人`：对指定目标发动攻击。
- `拍砖榜` / `板砖榜`：查看群内的“板砖之王”排行榜。

---

## 技术实现 (Technical Implementation)
- **架构**：基于 BotMatrix 插件架构，实现 `IPlugin` 接口。
- **存储**：使用 `MetaDataGuid` ORM 映射到数据库，自动处理表结构同步。
- **依赖**：依赖 `UserInfo` 服务处理积分扣除和获取，依赖 `AdminService` 处理禁言操作（闷砖系统）。
