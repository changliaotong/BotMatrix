# 婚姻系统 (MARRIAGE_SYSTEM)

> [⬅️ 返回文档中心](README.md) | [🏠 返回项目主页](../../README.md)

## 1. 系统概述

婚姻系统为用户提供虚拟社交体验，包括求婚、结婚、喜糖互动、甜蜜爱心及专属福利等功能。

## 2. 数据模型

### 2.1 婚姻信息 (UserMarriage)
- **SpouseId**: 配偶QQ号
- **MarriageDate**: 结婚纪念日
- **Status**: 状态 (single, married, divorced)
- **SweetsCount**: 发出的喜糖总数
- **RedPacketsCount**: 发出的红包总数
- **SweetHearts**: 甜蜜爱心值 (核心魅力指标)

## 3. 功能指令

### 3.1 结婚流程
- **求婚 [@用户/QQ]**: 向心仪的对象发起求婚。
- **接受求婚 / 办理结婚证**: 同意对方的求婚请求。
- **拒绝求婚**: 拒绝求婚请求。
- **我要离婚 / 办理离婚证**: 结束当前的婚姻关系。

### 3.2 互动与状态
- **我的婚姻 / 婚姻面板**: 查看配偶、纪念日及甜蜜资产。
- **我的对象**: 快速查看配偶信息及相爱天数。
- **发喜糖**: 撒喜糖互动，增加 5 点甜蜜爱心。
- **吃喜糖**: 参与抢喜糖，有机会获得积分奖励。
- **发红包**: 发放红包，增加 10 点甜蜜爱心。

### 3.3 甜蜜爱心系统
- **我的甜蜜爱心**: 查询当前拥有的爱心值。
- **赠送甜蜜爱心 [@用户] [数量]**: 将自己的爱心值赠送给他人。
- **使用甜蜜抽奖**: 消耗 10 点爱心进行抽奖，赢取积分大奖。
- **甜蜜爱心说明**: 查看详细的获取与使用规则。

### 3.4 另一半互动 (限已婚)
- **另一半签到**: 为配偶进行签到。
- **另一半抢楼**: 为配偶参与抢楼。
- **另一半抢红包**: 为配偶代抢群红包。
- *以上操作均可为配偶增加 2 点甜蜜爱心。*

### 3.5 专属福利
- **领取结婚福利**: 已婚用户可领取，奖励随结婚时长（天数）线性增长。

### 3.6 婚礼物品购买
- **购买婚纱**: 购买婚礼必备的婚纱。
- **购买婚戒**: 购买象征爱情的婚戒。

## 4. 核心逻辑

1. **甜蜜爱心获取**:
   - 发喜糖 (+5), 发红包 (+10)。
   - 为伴侣操作 (+2)。
   - 领取结婚福利 (+5)。
2. **福利计算**:
   - 基础 100 积分 + (结婚天数 * 2)。
3. **抽奖规则**:
   - 消耗 10 点爱心，随机获得 10~500 不等的积分奖励。
