# BotMatrix “技能机器人”项目规划书 (Skill Bot Roadmap)

## 1. 项目愿景
“技能机器人”不仅是简单的自动化脚本，而是具备**语义理解、自主分发、多步协作**能力的智能体。通过结合 AI 与分布式 Worker，将原本死板的任务（Tasks）升级为具备生命力的技能（Skills）。

## 2. 核心差异点

| 维度 | 传统任务 (Tasks) | 技能机器人 (Skill Bot) |
| --- | --- | --- |
| **触发方式** | 定时 (Cron) 或 关键词 | 自然语言意图识别 (LLM) |
| **执行逻辑** | 固定代码逻辑 | AI 动态编排 + 插件执行 |
| **扩展性** | 需硬编码或简单配置 | 动态报备，AI 自动感知能力清单 |
| **交互性** | 单向输出为主 | 多轮对话，参数缺失自动补全 |

## 3. 技术架构演进

### 3.1 技能定义与注册
- **动态报备机制**：Worker 启动时上报 `Capability`，包含语义描述、参数约束和示例。
- **技能元数据**：在 `Common/models` 中引入 `Skill` 模型，支持版本管理和权限控制。

### 3.2 AI 智能中枢 (AI Hub)
- **语义路由 (Semantic Routing)**：AI 根据用户输入，从 `SystemManifest` 中匹配最合适的技能。
- **参数提取 (Parameter Extraction)**：利用 LLM 从对话中提取结构化参数，对于缺失参数，AI 发起追问。
- **技能组合 (Skill Chaining)**：支持将多个原子技能组合成复杂流（例如：查天气 -> 生成建议 -> 发送提醒）。

### 3.3 执行流
1. **输入层**：用户通过 QQ/微信/网页发送自然语言。
2. **解析层**：BotNexus AI 模块解析意图，命中“技能”。
3. **决策层**：判断参数是否完整，不完整则下发“追问”指令。
4. **分发层**：通过 Redis 队列将结构化指令下发至具备该技能的特定 Worker。
5. **反馈层**：Worker 执行完毕，结果返回给 AI 进行润色或直接推送到终端。

## 4. 阶段性规划

### 第一阶段：基础设施增强 (当前重点)
- [ ] **完善 Skill 定义**：支持 JSON Schema 参数描述。
- [ ] **增强 Manifest**：将 Worker 报备的技能深度融入 AI Prompt。
- [ ] **实现语义匹配**：基于向量检索或 LLM 的技能发现。

### 第二阶段：AI 深度集成
- [ ] **对话补全**：实现缺失参数的 AI 自动追问机制。
- [ ] **插件市场雏形**：支持第三方 Worker 动态接入并立即被 AI 感知。

### 第三阶段：生态与闭环
- [ ] **可视化编排**：WebUI 支持拖拽式组合 AI 技能。
- [ ] **数据驱动优化**：根据使用频率自动优化 AI 推荐位。

## 5. 系统融入建议

### BotNexus 改动
- 扩展 `AIParser`，增加 `skill_match` 逻辑。
- 在 `tasks/manager.go` 中增加 `SkillRuntime` 模块，管理技能的生命周期。

### WebUI 改动
- 新增“技能市场”页面，展示所有在线 Worker 的能力。
- 在聊天界面增加“AI 助手”模式，支持直接调用技能。

---
*BotMatrix 团队 - 2025-12-30*
