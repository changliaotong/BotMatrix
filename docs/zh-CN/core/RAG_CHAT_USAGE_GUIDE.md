# Nexus RAG 聊天指令使用指南

本指南详细说明了如何通过聊天窗口管理 Nexus 机器人的知识库（RAG 系统）。

## 1. 核心功能概述 (全能数字助手)

Nexus 不仅仅是一个聊天机器人，它是您的**第二大脑**。它支持通过聊天窗口直接添加、查询和管理知识库。无论您是发送文档、复杂的表格还是图片，系统都会根据您的身份自动规划访问权限：

- **🛡️ 个人私有空间**：在私聊中上传的一切，仅您本人可见，绝对安全。
- **🤝 群组共享空间**：在群聊中上传，全群成员共同“喂养”机器人，共享集体智慧。
- **🌍 系统公共空间**：管理员提供的官方知识，全网机器人通用。

## 2. 聊天管理指令 (极简操作)

| 指令 | 参数 | 说明 | 权限 |
| :--- | :--- | :--- | :--- |
| `/kb list` | 无 | 查看当前场景（个人/群组）下的文档列表 | 所有用户 |
| `/kb del` | `<ID>` | 删除指定 ID 的文档 | 文档所有者/管理员 |
| `/kb status` | 无 | 查看知识库存储引擎及当前运行状态 | 所有用户 |
| `/kb add` | 无 | 获取添加文档的引导提示 | 所有用户 |
| `/kb sync` | 无 | 手动触发系统设计文档的全量同步 | 管理员 |

## 3. 自动文档索引 (发什么它都懂)

您无需输入复杂命令即可添加知识。只需在聊天窗口中**直接发送**：

1. **支持格式**：
   - **📄 文档**: PDF (含图片提取), Word, Markdown, TXT。
   - **📊 表格**: Excel (.xlsx/.xls)，机器人变身专业数据分析师。
   - **🖼️ 图片**: 截图、照片、海报，系统自动识别图中关键信息。
   - **💻 代码**: Go, Python, C++, JS 等，问逻辑不再难。
2. **处理流程**：
   - 发送后，机器人会即时回复 📥 确认信息。
   - 后台自动完成：下载 -> 多模态解析 -> AI 智能总结 -> 入库。
   - 处理完成后，您就可以针对这些内容提问了！

## 4. 酷炫玩法推荐 (RAG 1.0 基础篇) 🚀

- **【表格秒变报表】**：把 Excel 对账单发给它，直接问“这个月最大的三笔支出是多少？”
- **【看图说话】**：发一张复杂的系统架构图，问它“这个图里的 DB 是怎么同步的？”
- **【论文速读】**：发一个长篇 PDF，让它“总结第 3 章的实验数据并对比第 5 章的结论”。
- **【团队协作】**：在群里发一份《团建策划案》，艾特机器人“根据文档，统计一下愿意去爬山的人数”。

## 5. 进阶“黑科技”玩法 (RAG 2.0 增强篇) 🔥

系统现已升级 RAG 2.0 (Agentic RAG)，具备更强的逻辑推理与关联能力：

- **【打破砂锅问到底】**：即使你问得很模糊（如“那个怎么配？”），机器人也会根据上下文自动补全你的意图（“你是想问刚才上传的 PDF 里提到的数据库配置吗？”）。
- **【拒绝“胡说八道”】**：开启“自省”模式，机器人如果找不到确切证据，宁愿诚实回答“对不起，现有文档中没有提到这点”，而不是编造答案。
- **【知识图谱漫游】**：机器人会自动识别文档里的“人物、公司、技术、地点”并建立关联。
    - *示例*：你发了 10 份不同的会议纪要，直接问“最近三个月里，老王和老李共同参与了哪些项目？”，机器人会跨文档帮你梳理关系网。
- **【智能纠错专家】**：如果你记错了（如“为什么 pgvector 性能这么差？”），机器人会根据文档温和地提醒你：“根据技术文档，pgvector 在 IVFFlat 索引下的性能其实非常优异，您是否想了解如何优化它的查询速度？”

## 6. 隐私保护与“私人助理”模式 (未来已来) 🛡️

系统致力于打造最安全的个人数字助理，核心能力包括：

- **【隐私脱敏技术】**：当机器人需要调用云端模型（如 OpenAI）时，系统会自动将消息中的手机号、邮箱、身份证等敏感信息替换为占位符（如 `[PHONE_1]`），AI 处理完后再由本地 Nexus 还原，确保您的隐私不被泄露。
- **【私有化大模型支持】**：支持通过 Ollama 接入 Llama 3、DeepSeek 等开源模型。您可以将整个 Nexus 系统部署在自己的电脑或服务器（NAS）上，实现 100% 的数据离线处理。
- **【私人分身助理】**：您可以将自己的小号接入 Nexus。它不仅能帮你处理琐碎的日常（如总结群聊、过滤骚扰），还能利用 RAG 系统成为最懂你的“数字双胞胎”。

## 7. 管理员进阶操作

管理员除了可以使用 `/kb sync` 同步系统文档外，还可以通过 `/system` 指令管理全局权限：

- `/system whitelist add system <UserID>`：添加系统级管理员。
- `/system status`：查看包括 RAG 在内的全系统运行指标。

## 5. 常见问题 (FAQ)

- **Q: 为什么我删不掉某个文档？**
  - A: 除非您是系统管理员，否则您只能删除由您本人上传的文档。
- **Q: 为什么在群里发了文档，私聊问机器人它不知道？**
  - A: 为了隐私安全，群组文档仅在该群场景下生效。如果您希望在私聊中使用，请在私聊窗口重新发送一次。
- **Q: 索引一个文档需要多久？**
  - A: 取决于文档大小，通常 1MB 以内的文档在 5-10 秒内即可完成索引并生效。

---
*文档版本：v1.0.0*
*更新日期：2026-01-03*
