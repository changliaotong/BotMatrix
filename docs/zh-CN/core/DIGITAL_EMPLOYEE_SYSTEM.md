# ðŸ‘” æ•°å­—å‘˜å·¥ç³»ç»Ÿ (Digital Employee System)

> **ç‰ˆæœ¬**: 1.0
> **çŠ¶æ€**: æ ¸å¿ƒæž¶æž„å·²å®žçŽ°
> [ðŸŒ English](../en-US/DIGITAL_EMPLOYEE_SYSTEM.md) | [ç®€ä½“ä¸­æ–‡](DIGITAL_EMPLOYEE_SYSTEM.md)
> [â¬…ï¸ è¿”å›žæ–‡æ¡£ä¸­å¿ƒ](README.md) | [ðŸ  è¿”å›žé¡¹ç›®ä¸»é¡µ](../../README.md)

## 1. æ¦‚å¿µå®šä¹‰
**æ•°å­—å‘˜å·¥ (Digital Employee)** æ˜¯ BotMatrix å¯¹ AI æœºå™¨äººçš„é«˜çº§æ‹ŸäººåŒ–å°è£…ã€‚å®ƒä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªæ‰§è¡Œä»£ç çš„â€œæœºå™¨äººå®žä¾‹â€ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰**å·¥å·ã€èŒä½ã€éƒ¨é—¨ã€äººè®¾ã€æŠ€èƒ½é›†ä»¥åŠ KPI è€ƒæ ¸**çš„è™šæ‹Ÿé›‡å‘˜ï¼Œèƒ½å¤ŸåƒçœŸäººä¸€æ ·å‚ä¸Žä¼ä¸šä¸šåŠ¡æµç¨‹ã€‚

---

## 2. æ ¸å¿ƒæž¶æž„ï¼šâ€œäº”æ„Ÿå…­è§‰â€
ä¸ºäº†å®žçŽ°â€œåƒçœŸäººä¸€æ ·å·¥ä½œâ€ï¼Œæ•°å­—å‘˜å·¥çš„æž¶æž„è¢«åˆ’åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒå±‚çº§ï¼š

| ç»´åº¦ | å¯¹åº”ç»„ä»¶ | åŠŸèƒ½æè¿° |
| :--- | :--- | :--- |
| **èº«ä»½ (Identity)** | `IdentityGORM` / `BotID` | å·¥å·ã€èŒä½ã€æ‰€å±žéƒ¨é—¨ã€ä¼ä¸šå½’å±žåŠæƒé™èŒƒå›´ã€‚ |
| **æ„ŸçŸ¥ (Perception)** | `Intent Dispatcher` | æŽ¥æ”¶æ¥è‡ª IM (OneBot)ã€API æˆ–åä½œè¯·æ±‚çš„æ„å›¾ã€‚ |
| **æ€ç»´ (Cognition)** | `AI Service Layer` | åŸºäºŽ LLM çš„æŽ¨ç†ã€è§„åˆ’ä¸Žå†³ç­–ä¸­å¿ƒã€‚ |
| **è®°å¿† (Memory)** | `Cognitive Memory` | **çŸ­æœŸ**: ä¼šè¯ä¸Šä¸‹æ–‡ï¼›**é•¿æœŸ**: äº‹å®žç‰‡æ®µã€ç”¨æˆ·åå¥½ã€ä¸šåŠ¡çŸ¥è¯†ã€‚ |
| **æŠ€èƒ½ (Skills)** | `MCP Toolset` | èƒ½å¤Ÿè°ƒç”¨çš„å·¥å…·ï¼ˆæ•°æ®åº“ã€APIã€è·¨ä¼ä¸šæœåŠ¡ï¼‰ã€‚ |
| **åä½œ (Social)** | `Agent Mesh` | ä¸Žå…¶ä»–å‘˜å·¥ï¼ˆåŒä¼ä¸šæˆ–è·¨ä¼ä¸šï¼‰è¿›è¡Œä»»åŠ¡å§”æ´¾ä¸Žå’¨è¯¢ã€‚ |
| **è¿›åŒ– (Evolution)** | `Auto-Learning` | ä»Žå·¥ä½œä¸­æå–çŸ¥è¯†ï¼Œè‡ªæˆ‘çº é”™ä¸Žèƒ½åŠ›æå‡ã€‚ |

---

## 3. è¿è¡Œå…¨ç”Ÿå‘½å‘¨æœŸ (Operational Lifecycle)

### 3.1 æ„å›¾æ¿€æ´» (Triggering)
ä»»åŠ¡å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼è¿›å…¥æ•°å­—å‘˜å·¥çš„å·¥ä½œæµï¼š
1. **ç›´æŽ¥æŒ‡ä»¤**: ç”¨æˆ·é€šè¿‡ IMï¼ˆå¦‚ä¼ä¸šå¾®ä¿¡ã€é£žä¹¦ã€é’‰é’‰ï¼‰ç›´æŽ¥ä¸‹è¾¾ä»»åŠ¡ã€‚
2. **åä½œå§”æ´¾**: å¦ä¸€åæ•°å­—å‘˜å·¥é€šè¿‡ `task_delegate` å·¥å…·å°†å­ä»»åŠ¡å§”æ´¾ç»™è¯¥å‘˜å·¥ã€‚
3. **å®šæ—¶è°ƒåº¦**: ç³»ç»Ÿé¢„è®¾çš„ Cron ä»»åŠ¡è§¦å‘ï¼ˆå¦‚ï¼šæ¯æ—¥æ—©æŠ¥ç”Ÿæˆã€ç³»ç»Ÿå·¡æ£€ï¼‰ã€‚

### 3.2 è®¤çŸ¥å¤„ç†å¾ªçŽ¯ (Cognitive Loop)
1. **çŽ¯å¢ƒæ„ŸçŸ¥ (Context Loading)**: åŠ è½½çŸ­æœŸè®°å¿†ã€æ£€ç´¢é•¿æœŸäº‹å®žã€èŽ·å– RAG ä¸šåŠ¡èƒŒæ™¯ã€‚
2. **ä»»åŠ¡è§„åˆ’ (Planning)**: LLM åˆ†æžä»»åŠ¡ï¼Œå†³å®šæ˜¯å¦æ‹†è§£ä¸ºå¤šæ­¥æ‰§è¡Œè®¡åˆ’ã€‚
3. **å·¥å…·è°ƒç”¨ (Execution)**: é€šè¿‡ MCP åè®®è°ƒç”¨å·¥å…·ã€‚èƒ½åŠ›ä¸è¶³æ—¶è°ƒç”¨ `colleague_consult` å’¨è¯¢åŒäº‹ã€‚
4. **ç»“æžœéªŒè¯ (Validation)**: æ£€æŸ¥è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚

### 3.3 äº¤ä»˜ä¸Žé—­çŽ¯ (Closing & Learning)
1. **ç»“æžœåé¦ˆ**: è¿”å›žæœ€ç»ˆç»“æžœæˆ– `execution_id`ã€‚
2. **è®°å¿†å›ºåŒ–**: åŽå°è‡ªåŠ¨æå–å…³é”®äº‹å®žå¹¶å­˜å…¥ `CognitiveMemoryGORM`ã€‚
3. **KPI ç”Ÿæˆ**: è‡ªåŠ¨è¯„ä¼°æ€§èƒ½æŒ‡æ ‡å¹¶è®°å½•ã€‚

---

## 4. åä½œæœºåˆ¶ï¼šæ•°å­—å‘˜å·¥ç½‘æ ¼ (Agent Mesh)

### 4.1 ä¼ä¸šå†…ä¸Žè·¨ä¼ä¸šåä½œ
- **åŒæ­¥å’¨è¯¢**: å®žæ—¶é—®ç­”ï¼ˆç±»ä¼¼ç”µè¯ï¼‰ã€‚
- **å¼‚æ­¥å§”æ´¾**: ä»»åŠ¡æŒ‡æ´¾ä¸Žç»“æžœæ±‡æŠ¥ï¼ˆç±»ä¼¼é‚®ä»¶ï¼‰ã€‚
- **è·¨åŸŸæŽˆæƒ**: ä½¿ç”¨åŒå‘ JWT æ¡æ‰‹ã€‚ä¼ä¸š B çš„å‘˜å·¥åœ¨ä¼ä¸š A ä¸­è¡¨çŽ°ä¸ºå—æŽ§çš„â€œè®¿å®¢èº«ä»½â€ã€‚

### 4.2 A2A åä½œåè®®æ ‡å‡†
```json
{
  "header": {
    "msg_id": "uuid-v4",
    "execution_id": "exec-123",
    "sender": { "id": "emp-001", "type": "digital_employee" },
    "receiver": { "id": "emp-002", "type": "digital_employee" }
  },
  "payload": {
    "intent": "TASK_DELEGATE",
    "content": {
      "task_title": "åˆ†æž Q4 è´¢æŠ¥å¼‚å¸¸",
      "parameters": { "threshold": 0.05 }
    }
  },
  "control": { "require_approval": false, "timeout_ms": 30000 }
}
```

---

## 5. KPI è€ƒæ ¸ä¸Žè¿›åŒ–ä½“ç³»

### 5.1 æ ¸å¿ƒè€ƒæ ¸ç»´åº¦
ç³»ç»Ÿæ ¹æ®ä»»åŠ¡æ‰§è¡Œç»“æžœè‡ªåŠ¨è®¡ç®—ç»©æ•ˆï¼š

| ç»´åº¦ | è®¡ç®—é€»è¾‘ | æƒé‡ |
| :--- | :--- | :--- |
| **å®ŒæˆçŽ‡ (Success Rate)** | `æˆåŠŸä»»åŠ¡æ•° / æ€»ä»»åŠ¡æ•°` | 40% |
| **æ‰§è¡Œæ•ˆçŽ‡ (Efficiency)** | `å¹³å‡æ­¥éª¤è€—æ—¶ vs æ¨¡æ¿åŸºå‡†è€—æ—¶` | 30% |
| **è‡ªä¸»åº¦ (Autonomy)** | `æ— äººå·¥å¹²é¢„æ‰§è¡Œæ•° / æ€»ä»»åŠ¡æ•°` | 20% |
| **æˆæœ¬ (Cost)** | `æ¶ˆè€— Token æ•° vs ä»»åŠ¡ä»·å€¼ç³»æ•°` | 10% |

### 5.2 è‡ªåŠ¨è¿›åŒ–ä¸Žä¼˜åŒ–
KPI åˆ†æ•°å½±å“èµ„æºåˆ†é…ã€‚ä½Žç»©æ•ˆå‘˜å·¥è§¦å‘â€œå†åŸ¹è®­â€ï¼š
1. ç³»ç»Ÿåˆ†æžæœ€è¿‘å¤±è´¥çš„ä»»åŠ¡ã€‚
2. AI è‡ªåŠ¨ç”Ÿæˆæ›´ç²¾å‡†çš„ `Bio` (äººè®¾) æˆ–æç¤ºè¯è¡¥ä¸ä»¥æå‡æˆåŠŸçŽ‡ã€‚

---

## 6. ä»»åŠ¡å¾…åŠžä¸Žç®¡ç† (Todo System)

### 6.1 ä»»åŠ¡çŠ¶æ€
æ¯ä¸ªæ•°å­—å‘˜å·¥æ‹¥æœ‰ç‹¬ç«‹çš„ä»»åŠ¡é˜Ÿåˆ—ï¼š
- **å¾…å¤„ç† (Pending)**: å·²æŒ‡æ´¾ä½†å°šæœªå¼€å§‹ã€‚
- **æ‰§è¡Œä¸­ (Executing)**: æ­£åœ¨ç”± AI å¼•æ“Žé©±åŠ¨ã€‚
- **éœ€å®¡æ‰¹ (Pending Approval)**: ç­‰å¾…äººå·¥ä»‹å…¥çš„é«˜é£Žé™©ä»»åŠ¡ã€‚

### 6.2 ç®¡ç†æŽ¥å£ (Admin API)
- `GET /api/admin/employees/tasks`: èŽ·å–å‘˜å·¥ä»»åŠ¡åˆ—è¡¨ã€‚
- `GET /api/admin/employees/kpi`: èŽ·å–ç»©æ•ˆç»Ÿè®¡æ•°æ®ã€‚
- `POST /api/admin/employees/optimize`: è§¦å‘ AI é©±åŠ¨çš„è‡ªåŠ¨ä¼˜åŒ–ã€‚

---

## 7. å®‰å…¨ã€åˆè§„ä¸Žäººå·¥å¹²é¢„ (HITL)

### 7.1 äººå·¥å¹²é¢„æ—¶åˆ»
1. **ä½Žç½®ä¿¡åº¦æ‹¦æˆª**: LLM ç½®ä¿¡åº¦ä½ŽäºŽé˜ˆå€¼æ—¶è‡ªåŠ¨æŒ‚èµ·ã€‚
2. **é«˜é£Žé™©æ“ä½œ**: å¤§é¢æ”¯ä»˜ã€é…ç½®å˜æ›´éœ€äººç±»ç®¡ç†å‘˜ç‚¹å‡»â€œæ ¸å‡†â€ã€‚
3. **çŸ¥è¯†ç›²åŒº**: æ•°å­—å‘˜å·¥å¯å‘å‡º `HELP_REQUEST` ç”±äººç±»æŽ¥ç®¡ã€‚

### 7.2 å®‰å…¨ä¿éšœ
- **æ•°æ®è„±æ•**: ä¸Šä¼  LLM å‰è‡ªåŠ¨è¯†åˆ«å¹¶å±è”½æ•æ„Ÿä¿¡æ¯ã€‚
- **å®¡è®¡è·Ÿè¸ª**: `AIAgentTrace` è®°å½•æ¯ä¸€æ¬¡å·¥å…·è°ƒç”¨çš„å…¨é‡å‚æ•°ä¸Žè¿”å›žã€‚
- **æƒé™æœ€å°åŒ–**: ä»…æŽˆæƒå²—ä½æ‰€éœ€çš„æœ€å° MCP å·¥å…·é›†ã€‚

---

## 8. å²—ä½æ ‡å‡†æ¨¡æ¿åº“ (Role Templates)

| å²—ä½ç±»åˆ« | æ ¸å¿ƒèƒ½åŠ› (MCP Tools) | å…¸åž‹åº”ç”¨åœºæ™¯ |
| :--- | :--- | :--- |
| **è¡Œæ”¿åŠ©ç†** | æ—¥ç¨‹ç®¡ç†ã€å·®æ—…å®¡æ‰¹ | è‡ªåŠ¨å®‰æŽ’ä¼šè®®ã€å¤„ç†æŠ¥é”€ã€‚ |
| **æŠ€æœ¯æ”¯æŒ** | æ—¥å¿—åˆ†æžã€ä»£ç æ£€ç´¢ | 7x24h è‡ªåŠ¨æŽ’éšœã€è¾…åŠ© Code Reviewã€‚ |
| **è´¢åŠ¡åˆå®¡** | å‘ç¥¨è¯†åˆ«ã€ERP æŽ¥å£ | è‡ªåŠ¨åŒ–æŠ¥é”€é¢„å®¡ã€å¼‚å¸¸è´¦å•é¢„è­¦ã€‚ |
| **æ•°æ®åˆ†æžå¸ˆ** | SQL æŸ¥è¯¢ã€æŠ¥è¡¨ç”Ÿæˆ | è‡ªåŠ¨ç”Ÿæˆç»è¥æ—¥æŠ¥ã€é¢„æµ‹è¶‹åŠ¿ã€‚ |

---

## 9. æ•°æ®æµå‘å›¾
```mermaid
graph TD
    A[ç”¨æˆ·/åä½œæ–¹] -->|è¯·æ±‚| B[æ„å›¾åˆ†å‘å™¨]
    B -->|æ¿€æ´»| C[æ•°å­—å‘˜å·¥ A]
    C -->|æ£€ç´¢| D[è®¤çŸ¥è®°å¿†åº“]
    C -->|æ£€ç´¢| E[RAG çŸ¥è¯†åº“]
    C -->|å†³ç­–| F{æ˜¯å¦éœ€è¦åä½œ?}
    F -->|æ˜¯| G[åä½œç½‘æ¡¥]
    G -->|å§”æ´¾| H[æ•°å­—å‘˜å·¥ B]
    F -->|å¦| I[MCP å·¥å…·æ‰§è¡Œ]
    I -->|ç»“æžœ| J[ç»“æžœéªŒè¯]
    J -->|åé¦ˆ| A
    J -->|è§¦å‘| K[è‡ªä¸»å­¦ä¹ ç³»ç»Ÿ]
    K -->|æ›´æ–°| D
```
