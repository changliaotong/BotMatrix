# 🕸️ 全球技能机器人网络 (Global Agent Mesh)

> [⬅️ 返回文档中心](../README.md) | [🏠 返回项目主页](../../README.md)

## 1. 核心理念：智能体即服务 (Agent as a Service)

在 Global Agent Mesh 中，每一个 BotMatrix 节点都是一个标准的 **MCP Host/Server**。
- **互联互通**：不同企业的技能机器人可以通过 MCP 协议安全地共享工具、知识库和业务逻辑。
- **能力解耦**：开发者只需关注技能实现，Mesh 负责发现、授权与通信。

> **核心术语映射**：
> - **Mesh** = 技能机器人的朋友圈/协作网
> - **B2B Call** = 跨企业的技能调用

### 1.1 核心驱动力
Global Agent Mesh 的实现依赖于 **Model Context Protocol (MCP)** 的标准化能力，以及对传统 **IM 适配器** 的“双栈”化改造。

> **延伸阅读**：[深度解析：Global Agent Mesh、MCP 与 IM 适配器的共生关系](docs/zh-CN/core/AGENT_MESH_AND_MCP_RELATIONSHIP.md)

## 2. 核心支柱 (Core Pillars)

### 2.1 联邦身份认证 (Federated Identity)
- **组织 ID (OrgID)**：基于公钥基础设施 (PKI) 的全球唯一标识。
- **跨域授权**：使用 JWT 或 OAuth2 进行 MCP 调用鉴权，确保 A 组织的机器人调用 B 组织的工具时经过显式授权。

### 2.2 动态发现机制 (Discovery)
- **联邦搜索 (Federal Search)**: **[已实现]** 支持在本地及所有已连接的远程节点中实时并发搜索可用的 MCP 服务。
- **点对点挂载**: 通过交换 MCP Endpoint 和 APIKey 直接建立连接。

### 2.3 任务接力 (Task Relay)
- **跨域调用 (B2B Call)**: **[已实现]** 当本地机器人无法处理某个意图时，它可以通过安全协议直接调用远程节点的 MCP 工具。
- **多级调度**: 实现跨地域、跨平台的任务接力，形成全球范围的智能协作。

## 3. 典型应用场景

### 3.1 跨国企业协作
- **场景**：中国总部的机器人需要获取美国分公司的实时库存。
- **实现**：美国分公司的 BotMatrix 将库存查询系统封装为 MCP Tool，总部机器人通过 MCP 协议跨洋调用。

### 3.2 私人助理集群
- **场景**：用户拥有多个私人机器人（如：居家、工作、娱乐）。
- **实现**：所有机器人通过私有的 Global Agent Mesh 互联。当你向“居家机器人”询问“工作进展”时，它能通过 MCP 自动从“工作机器人”那里获取摘要。

## 4. 安全与隐私 (Security by Design)
- **隐私堡垒 (Privacy Bastion)**：在跨实例调用前，本地 PII 过滤层会自动替换敏感信息。
- **沙箱执行**：远程工具调用在受限的权限上下文中运行，无法越权访问宿主机资源。

## 5. 演进路线图
1. **Phase 1 (已完成)**：实现 MCP 协议基础架构，支持 Webhook 和内部技能桥接。
2. **Phase 2 (已完成)**：实现基于数据库的 MCP 服务器动态注册与权限隔离，支持 SSE 实时通信协议。
3. **Phase 3 (已完成)**：实现基于 B2B 联邦身份 (JWT) 的安全跨域 MCP 调用，集成联邦搜索 (Federal Search) 与隐私堡垒。
4. **Phase 4 (未来)**：实现语义向量检索增强的认知记忆，发布 BotMatrix Hub 原型支持动态服务发现与自动组网。
