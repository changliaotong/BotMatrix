# Changelog | 更新日志
[English](../en-US/CHANGELOG.md) | [返回项目主页](../../README.md) | [返回文档中心](../README.md)

所有本项目的重要变更都将记录在此文件中。

## v1.7.0 (2025-12-27)
*   **🧠 AI 任务调度中心 (AI Task Orchestrator)**:
    - **自然语言解析**: 用户现在可以使用纯中文/英文描述自动化任务（例如：“每天晚上 11 点全群禁言”）。
    - **结构化任务生成**: AI 自动生成基于 cron 的任务，包含正确的动作和参数。
    - **草案与确认流程**: 引入了多步工作流，AI 提议任务，用户在部署前进行确认。
*   **🛡️ 高级路由与安全 (Advanced Routing & Security)**:
    - **策略管理**: 新增了“策略”模块，用于定义复杂的路由策略和可重用的逻辑块。
    - **影子规则**: 实现了非侵入式的消息监控和重定向规则，用于审计和测试。
*   **👤 身份映射系统 (Identity Mapping System)**:
    - **跨平台身份**: 来自不同平台（QQ、微信、Discord）的用户现在可以映射到唯一的“系统身份”。
    - **集中权限管理**: 权限和统计数据现在针对统一身份进行跟踪，而不是碎片化的平台 ID。
*   **🛠️ 界面现代化 (WebUI Modernization)**:
    - **Vue 3 & Pinia 架构**: 重构了核心控制面板，使用 Vue 3 Composition API 和 Pinia 进行极速状态管理。
    - **系统能力发现**: 前端现在通过新的能力 API 动态发现后端动作、拦截器和技能。
*   **📊 实时系统监控 (Real-time System Monitoring)**:
    - **增强的 Docker 集成**: 在控制面板中直接添加了机器人容器的实时 CPU/内存占用跟踪。
    - **Nexus 状态面板**: 实时可视化全局连接统计，包括总机器人、工作节点和系统运行时间。

## v1.6.0 (2025-12-25)
*   **🌌 3D 可视化大修**:
    *   **增强标签**: 增加了节点标签字体大小，提高远距离可见度。
    *   **精灵朝向**: 修复了头像精灵始终面向摄像机，不受节点旋转影响。
    *   **视觉识别**: 改进了针对不同平台的用户/机器人识别与头像处理。
    *   **动态连线**: 引入了全新的蓝色主题连线调色板和动态传输闪烁——连线在消息传输时瞬间变亮并缓慢淡回基准色。
    *   **用户-群组连通性**: 在 3D 空间中增加了用户与其所属群组之间持久、可见的连线。
*   **🛣️ 全路径路由可视化**:
    *   实现了全路径事件可视化：接收消息路径为 `用户 -> 群组 -> Nexus -> Worker`，响应消息路径则相反。
*   **📡 智能缓存增强**:
    *   **元数据缓存**: BotNexus 现在会自动从 Napcat 事件中缓存群名和用户昵称。
    *   **消息增强**: 转发的消息在到达 Worker 前会使用缓存的元数据进行增强，显著减少了 Worker 调用外部 API 获取基本信息的需要。
*   **⚙️ 系统可靠性与自动回复**:
    *   **设置持久化**: 修复了 `LogLevel` 和 `AutoReply` 设置无法正确保存到配置文件的关键错误。
    *   **智能自动回复**: 实现了全局 `AutoReply` 逻辑，在系统关闭时自动通知用户维护信息。
*   **扫除动态 Worker 管理**: 在 3D 可视化中增加了实时状态过滤，确保仅显示在线的 Worker 节点。

## v1.5.0 (2025-12-24)
*   **🐘 PostgreSQL 优先架构**: 完全移除了旧的 SQLite 支持，以简化数据库操作，并专注于 PostgreSQL 的企业级性能。
*   **🧹 依赖现代化**: 删除了 `modernc.org/sqlite` 及相关的无 CGO SQLite 驱动，减少了二进制文件大小和复杂性。
*   **⚙️ 统一配置 WebUI**: 重新设计了 WebUI 中的后端配置界面，以匹配新的仅限 PostgreSQL 架构。添加了以下实时配置：
    *   **PostgreSQL**: 完整的连接字符串管理（主机、端口、用户、数据库、SSL）。
    *   **Redis 集群**: 简化了集群地址和密码设置。
    *   **系统功能**: 集成了日志级别、自动回复和技能系统的开关。
*   **🛡️ 类型安全 API 通信**: 在 WebUI 和 Go 后端中强制执行端口字段的严格数字验证，解决了数据类型不匹配问题。
*   **🌐 增强的本地化**: 在 `locales.js` 中为所有新的 PostgreSQL 和系统配置字段添加了完整的翻译。

---
*(更多历史更新请查看英文版 CHANGELOG)*
