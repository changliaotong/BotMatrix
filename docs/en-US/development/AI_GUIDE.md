# BotNexus AI Intelligent Center User Guide
[中文](../development/AI_GUIDE.md) | [Back to Home](../../README.md) | [Back to Docs](../README.md)

The AI Intelligent Center is a core feature of BotNexus, designed to significantly lower the threshold for complex automation configuration through Natural Language Processing (NLP). AI is deeply integrated into multiple modules such as task creation, policy management, and tag management.

## 1. Core AI Capabilities

### 1.1 Intelligent Task Generation (AI Tasking)
You no longer need to manually write complex JSON task definitions; you can generate them with just one sentence.
- **Example Input**: "Remind everyone to write weekly reports every morning at 10 AM"
- **AI Action**: 
    - Identifies intent as `create_task`
    - Extracts trigger rule: `cron: 0 10 * * *`
    - Extracts action: `send_message`
    - Generates structured data; users can deploy it with one click.

### 1.2 Natural Language Policy Adjustment (AI Policy)
Manage the status of the entire bot matrix through conversation.
- **Example Input**: "The system is going to be maintained, help me turn on maintenance mode for two hours"
- **AI Action**:
    - Identifies intent as `adjust_policy`
    - Automatically configures the `maintenance_mode` policy
    - Sets expiration time to automatically restore after 2 hours.

### 1.3 Batch Tag Management (AI Tagging)
Quickly categorize massive objects.
- **Example Input**: "Tag the 5 most active groups from yesterday as 'Core Groups'"
- **AI Action**:
    - Identifies intent as `manage_tags`
    - Queries statistical data to filter matching groups
    - Executes `AddTag` operation in batches.

## 2. Developer Integration Guide

### AI Parsing Interface (Unified AI Endpoint)
`POST /api/ai/parse`

**Request Parameters**:
```json
{
  "input": "User natural language input",
  "action_type": "Optional, create_task/adjust_policy/manage_tags",
  "context": {
    "current_bot": "12345",
    "last_error": "..."
  }
}
```

**Response Result**:
```json
{
  "success": true,
  "data": {
    "draft_id": "uuid-string", // Unique identifier for confirming execution
    "intent": "create_task",
    "summary": "Create automated task",
    "data": {
      "name": "AI Generated Task",
      "type": "cron",
      "action_type": "send_message",
      "action_params": "...",
      "trigger_config": "..."
    },
    "analysis": "AI's reasoning suggestion...",
    "is_safe": true
  }
}
```

### AI Confirmation Interface (AI Confirm Endpoint)
`POST /api/ai/confirm`

**Request Parameters**:
```json
{
  "draft_id": "uuid-string"
}
```

**Response Result**:
```json
{
  "success": true,
  "message": "Execution successful"
}
```

### System Capabilities Interface (System Capabilities)
`GET /api/system/capabilities`

**Core Function**:
This interface returns the **BotNexus Capability Manifest**. Its main roles are:
1. **Feeding to AI**: Send the content of the `prompt` field as a System Prompt to the Large Language Model, letting the AI immediately understand all actions (e.g., `send_message`, `mute_group`) and triggers (e.g., `cron`, `condition`) currently supported by the system.
2. **Dynamic Update**: When new features are added to the system, only the manifest needs to be updated, without modifying the AI's parsing logic code.
3. **Frontend Display**: The frontend can use this manifest to dynamically generate feature lists or help interfaces.

## 3. Safety and Manual Confirmation Workflow
To ensure system safety, all commands generated by AI **must** go through the following workflow:
1. **Parsing Phase**: AI returns `draft_id` and suggested operations.
2. **Manual Review**: The user reviews AI suggestions (Summary and Analysis) in the frontend UI.
3. **Confirmation Phase**: The user clicks confirm, calls the `/api/ai/confirm` interface, and the system truly executes the action (e.g., creating a task).
4. **Expiration Mechanism**: All `draft_id`s have a default validity period of 15 minutes.

## 3. Enterprise Edition Enhanced AI Features

- **Intent Prediction**: Based on historical behavior, actively suggest users to create certain tasks (e.g., if many advertisements are detected in a group, suggest turning on "Keyword Muting").
- **Simulation Execution Report**: Before a task goes online, AI generates a detailed "Impact Scope Assessment Report".
- **Self-Healing AI**: When a task is detected to fail continuously, AI automatically analyzes the cause and tries to fix the configuration.

---
*BotNexus - Bringing robot management back to natural language.*
